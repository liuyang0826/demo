(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-c02b91ec"],{"0797":function(t,e,a){"use strict";var i={getCodesListByCatalog:"/admin/code/info/list/catalog/",getInspectQRCodes:"/admin/catalog/tree",getSensorsListByPart:"/api/partsSensorRelation/getSensorIds",getSensorInfoById:"/api/sensor/getSensorById",getPartsList:"/admin/parts/getList",getCodeById:"/api/sensor/getSensorById",updateCode:"/api/sensor/getSensorById",saveCode:"/api/sensor/getSensorById",deleteCode:"/api/sensor/getSensorById",addTemplateNode:"/api/sensor/getSensorById",previewCode:"/api/sensor/getSensorById",deleteTemplate:"/api/sensor/getSensorById",getPlansListByCatalog:"/api/sensor/getSensorById",getInspectPlans:"/api/sensor/getSensorById",catalog:{add:"/admin/catalog/add",update:"/admin/catalog/update",delete:"/admin/catalog/delete/",tree:"/admin/catalog/tree",typeTree:"/admin/catalog/tree/"},qrCode:{listById:"/admin/code/info/list/catalog/",save:"/admin/code/info/save",update:"/admin/code/info/update",delete:"/admin/code/info/delete/",preview:"/admin/code/info/preview/",detail:"/admin/code/info/detail/",isBinded:"/admin/code/info/verify/device/"},template:{list:"/admin/inspect/template/list/catalog/",listForOrg:"/admin/inspect/template/getInspectTemplateByOrgId",detail:"/admin/inspect/template/get/",save:"/admin/inspect/template/saveTemplate",delete:"/admin/inspect/template/"},personGroup:{group:{add:"/admin/person/group/add",all:"/admin/person/group/all",list:"/admin/person/group/list",delete:"/admin/person/group/delete/",update:"/admin/person/group/update"},person:{list:"/admin/inspect/person/list/",add:"/admin/inspect/person/add",update:"/admin/inspect/person/put",delete:"/admin/inspect/person/delete/"}},record:{list:"/admin/inspect/record/pagination",save:"/admin/inspect/record/save"},other:{getAllUserList:"/admin/getUserList",getAllUser:"/admin/processDesigner/public/visible/getAllUser",getAllEventType:"/admin/event/type/tree"}};e["a"]=i},"1dd3":function(t,e,a){"use strict";var i=a("7c87"),n=a.n(i);n.a},"1f6b":function(t,e,a){"use strict";var i=a("719d"),n=a.n(i);n.a},"2e21f":function(t,e,a){},"2f62":function(t,e,a){"use strict";(function(t){
/**
 * vuex v3.1.2
 * (c) 2019 Evan You
 * @license MIT
 */
function i(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:i});else{var a=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[i].concat(t.init):i,a.call(this,t)}}function i(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}a.d(e,"e",(function(){return S})),a.d(e,"d",(function(){return N})),a.d(e,"c",(function(){return M})),a.d(e,"b",(function(){return P}));var n="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},o=n.__VUE_DEVTOOLS_GLOBAL_HOOK__;function s(t){o&&(t._devtoolHook=o,o.emit("vuex:init",t),o.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){o.emit("vuex:mutation",t,e)})))}function r(t,e){Object.keys(t).forEach((function(a){return e(t[a],a)}))}function l(t){return null!==t&&"object"===typeof t}function c(t){return t&&"function"===typeof t.then}function d(t,e){return function(){return t(e)}}var p=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=("function"===typeof a?a():a)||{}},u={namespaced:{configurable:!0}};u.namespaced.get=function(){return!!this._rawModule.namespaced},p.prototype.addChild=function(t,e){this._children[t]=e},p.prototype.removeChild=function(t){delete this._children[t]},p.prototype.getChild=function(t){return this._children[t]},p.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},p.prototype.forEachChild=function(t){r(this._children,t)},p.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},p.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},p.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(p.prototype,u);var m=function(t){this.register([],t,!1)};function f(t,e,a){if(e.update(a),a.modules)for(var i in a.modules){if(!e.getChild(i))return void 0;f(t.concat(i),e.getChild(i),a.modules[i])}}m.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},m.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,a){return e=e.getChild(a),t+(e.namespaced?a+"/":"")}),"")},m.prototype.update=function(t){f([],this.root,t)},m.prototype.register=function(t,e,a){var i=this;void 0===a&&(a=!0);var n=new p(e,a);if(0===t.length)this.root=n;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],n)}e.modules&&r(e.modules,(function(e,n){i.register(t.concat(n),e,a)}))},m.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),a=t[t.length-1];e.getChild(a).runtime&&e.removeChild(a)};var h;var g=function(t){var e=this;void 0===t&&(t={}),!h&&"undefined"!==typeof window&&window.Vue&&$(window.Vue);var a=t.plugins;void 0===a&&(a=[]);var i=t.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new m(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new h,this._makeLocalGettersCache=Object.create(null);var n=this,o=this,r=o.dispatch,l=o.commit;this.dispatch=function(t,e){return r.call(n,t,e)},this.commit=function(t,e,a){return l.call(n,t,e,a)},this.strict=i;var c=this._modules.root.state;x(this,c,[],this._modules.root),_(this,c),a.forEach((function(t){return t(e)}));var d=void 0!==t.devtools?t.devtools:h.config.devtools;d&&s(this)},v={state:{configurable:!0}};function b(t,e){return e.indexOf(t)<0&&e.push(t),function(){var a=e.indexOf(t);a>-1&&e.splice(a,1)}}function y(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var a=t.state;x(t,a,[],t._modules.root,!0),_(t,a,e)}function _(t,e,a){var i=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var n=t._wrappedGetters,o={};r(n,(function(e,a){o[a]=d(e,t),Object.defineProperty(t.getters,a,{get:function(){return t._vm[a]},enumerable:!0})}));var s=h.config.silent;h.config.silent=!0,t._vm=new h({data:{$$state:e},computed:o}),h.config.silent=s,t.strict&&C(t),i&&(a&&t._withCommit((function(){i._data.$$state=null})),h.nextTick((function(){return i.$destroy()})))}function x(t,e,a,i,n){var o=!a.length,s=t._modules.getNamespace(a);if(i.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=i),!o&&!n){var r=F(e,a.slice(0,-1)),l=a[a.length-1];t._withCommit((function(){h.set(r,l,i.state)}))}var c=i.context=I(t,s,a);i.forEachMutation((function(e,a){var i=s+a;O(t,i,e,c)})),i.forEachAction((function(e,a){var i=e.root?a:s+a,n=e.handler||e;T(t,i,n,c)})),i.forEachGetter((function(e,a){var i=s+a;w(t,i,e,c)})),i.forEachChild((function(i,o){x(t,e,a.concat(o),i,n)}))}function I(t,e,a){var i=""===e,n={dispatch:i?t.dispatch:function(a,i,n){var o=j(a,i,n),s=o.payload,r=o.options,l=o.type;return r&&r.root||(l=e+l),t.dispatch(l,s)},commit:i?t.commit:function(a,i,n){var o=j(a,i,n),s=o.payload,r=o.options,l=o.type;r&&r.root||(l=e+l),t.commit(l,s,r)}};return Object.defineProperties(n,{getters:{get:i?function(){return t.getters}:function(){return k(t,e)}},state:{get:function(){return F(t.state,a)}}}),n}function k(t,e){if(!t._makeLocalGettersCache[e]){var a={},i=e.length;Object.keys(t.getters).forEach((function(n){if(n.slice(0,i)===e){var o=n.slice(i);Object.defineProperty(a,o,{get:function(){return t.getters[n]},enumerable:!0})}})),t._makeLocalGettersCache[e]=a}return t._makeLocalGettersCache[e]}function O(t,e,a,i){var n=t._mutations[e]||(t._mutations[e]=[]);n.push((function(e){a.call(t,i.state,e)}))}function T(t,e,a,i){var n=t._actions[e]||(t._actions[e]=[]);n.push((function(e){var n=a.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);return c(n)||(n=Promise.resolve(n)),t._devtoolHook?n.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):n}))}function w(t,e,a,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return a(i.state,i.getters,t.state,t.getters)})}function C(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function F(t,e){return e.length?e.reduce((function(t,e){return t[e]}),t):t}function j(t,e,a){return l(t)&&t.type&&(a=e,e=t,t=t.type),{type:t,payload:e,options:a}}function $(t){h&&t===h||(h=t,i(h))}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(t){0},g.prototype.commit=function(t,e,a){var i=this,n=j(t,e,a),o=n.type,s=n.payload,r=(n.options,{type:o,payload:s}),l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(t){t(s)}))})),this._subscribers.forEach((function(t){return t(r,i.state)})))},g.prototype.dispatch=function(t,e){var a=this,i=j(t,e),n=i.type,o=i.payload,s={type:n,payload:o},r=this._actions[n];if(r){try{this._actionSubscribers.filter((function(t){return t.before})).forEach((function(t){return t.before(s,a.state)}))}catch(c){0}var l=r.length>1?Promise.all(r.map((function(t){return t(o)}))):r[0](o);return l.then((function(t){try{a._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,a.state)}))}catch(c){0}return t}))}},g.prototype.subscribe=function(t){return b(t,this._subscribers)},g.prototype.subscribeAction=function(t){var e="function"===typeof t?{before:t}:t;return b(e,this._actionSubscribers)},g.prototype.watch=function(t,e,a){var i=this;return this._watcherVM.$watch((function(){return t(i.state,i.getters)}),e,a)},g.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},g.prototype.registerModule=function(t,e,a){void 0===a&&(a={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),x(this,this.state,t,this._modules.get(t),a.preserveState),_(this,this.state)},g.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var a=F(e.state,t.slice(0,-1));h.delete(a,t[t.length-1])})),y(this)},g.prototype.hotUpdate=function(t){this._modules.update(t),y(this,!0)},g.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(g.prototype,v);var S=V((function(t,e){var a={};return E(e).forEach((function(e){var i=e.key,n=e.val;a[i]=function(){var e=this.$store.state,a=this.$store.getters;if(t){var i=L(this.$store,"mapState",t);if(!i)return;e=i.context.state,a=i.context.getters}return"function"===typeof n?n.call(this,e,a):e[n]},a[i].vuex=!0})),a})),N=V((function(t,e){var a={};return E(e).forEach((function(e){var i=e.key,n=e.val;a[i]=function(){var e=[],a=arguments.length;while(a--)e[a]=arguments[a];var i=this.$store.commit;if(t){var o=L(this.$store,"mapMutations",t);if(!o)return;i=o.context.commit}return"function"===typeof n?n.apply(this,[i].concat(e)):i.apply(this.$store,[n].concat(e))}})),a})),M=V((function(t,e){var a={};return E(e).forEach((function(e){var i=e.key,n=e.val;n=t+n,a[i]=function(){if(!t||L(this.$store,"mapGetters",t))return this.$store.getters[n]},a[i].vuex=!0})),a})),P=V((function(t,e){var a={};return E(e).forEach((function(e){var i=e.key,n=e.val;a[i]=function(){var e=[],a=arguments.length;while(a--)e[a]=arguments[a];var i=this.$store.dispatch;if(t){var o=L(this.$store,"mapActions",t);if(!o)return;i=o.context.dispatch}return"function"===typeof n?n.apply(this,[i].concat(e)):i.apply(this.$store,[n].concat(e))}})),a})),D=function(t){return{mapState:S.bind(null,t),mapGetters:M.bind(null,t),mapMutations:N.bind(null,t),mapActions:P.bind(null,t)}};function E(t){return R(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function R(t){return Array.isArray(t)||l(t)}function V(t){return function(e,a){return"string"!==typeof e?(a=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,a)}}function L(t,e,a){var i=t._modulesNamespaceMap[a];return i}var z={Store:g,install:$,version:"3.1.2",mapState:S,mapMutations:N,mapGetters:M,mapActions:P,createNamespacedHelpers:D};e["a"]=z}).call(this,a("c8ba"))},"35a9":function(t,e,a){},"440d":function(t,e,a){"use strict";var i=a("35a9"),n=a.n(i);n.a},"5b2e":function(t,e,a){},"5c5e":function(t,e,a){"use strict";var i=a("ec15"),n=a.n(i);n.a},"5fd1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("plans-tree",{attrs:{mode:"manage"}})},n=[],o=a("d225"),s=a("308d"),r=a("6bb5"),l=a("4e2b"),c=a("9ab4"),d=a("60a3"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plans_tree_list"},[a("q-card",{directives:[{name:"show",rawName:"v-show",value:!t.planEditFormVisible,expression:"!planEditFormVisible"}],staticClass:"sub_menu",attrs:{title:"巡检方案目录","btn-tip":"添加一级节点"},on:{click:function(e){return t.openNodeForm("add")}}},[a("div",{staticClass:"tree-body"},[a("el-tree",{ref:"plansTree",staticStyle:{"margin-top":"16px"},attrs:{"default-expand-all":"",data:t.plansData,"node-key":"id",props:t.plansProp},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("div",{staticClass:"operation-buttons"},[a("span",{staticStyle:{"line-height":"28px"},attrs:{title:i.label}},[t._v(t._s(i.label))]),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.openNodeForm("add",n)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return e.stopPropagation(),t.openNodeForm("edit",n,i)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.stopPropagation(),t.removeTreeNode(n)}}})],1)])}}])})],1)]),a("q-card",{directives:[{name:"show",rawName:"v-show",value:!t.planEditFormVisible,expression:"!planEditFormVisible"}],staticClass:"sub_main",attrs:{title:t.plansName+"方案列表","btn-tip":"创建新方案"},on:{click:function(e){return t.openPlanEditForm("add","",t.editMode.catalogId)}}},[t.templatesList.length?[a("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"templatesList"},t._l(t.templatesList,(function(e){return a("li",{key:e.id,class:[t.selected===e.id?"selected-plan":"","choose"===t.mode?"selected-hover":""],on:{click:function(a){t.selectButtonsVisible&&t.selectedItem(e)}}},[a("el-row",{staticClass:"listItemTitle"},[a("el-col",{attrs:{span:24}},[t._v(t._s(e.name))])],1),a("el-row",{staticClass:"listItemRemark"},[a("el-col",{attrs:{span:24}},[t._v(t._s(e.remark))])],1),a("el-row",{staticClass:"listItemProps"},[a("el-col",{staticStyle:{"margin-top":"6px"},attrs:{span:12}},[t._v("制作时间：")]),a("el-col",{staticStyle:{"margin-top":"6px","text-align":"right"},attrs:{span:12}},[t._v(t._s(e.createDatetime))])],1),a("el-row",{staticClass:"listItemProps"},[a("el-col",{attrs:{span:12}},[t._v("制作人：")]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[t._v("\n              "+t._s(e.createId)+"\n            ")])],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.manageButtonsVisible,expression:"manageButtonsVisible"}],staticClass:"listItemProps"},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(a){return t.openPlanEditForm("preview",e.id,e.catalogId)}}}),a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.openPlanEditForm("edit",e.id,e.catalogId)}}}),a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.id)}}})],1)],1)],1)})),0)]:a("div",{staticClass:"template-empty-body"},[a("span",[t._v("该目录下暂无方案")]),a("plan-edit")],1)],2),t.planEditFormVisible?a("plan-edit-form",{attrs:{"pre-data":t.editMode},on:{turnToPlanTree:t.changeInspectPlanVisible}}):t._e(),a("el-dialog",{attrs:{title:"添加目录节点",center:"",visible:t.addNodeFormVisible,"destroy-on-close":!0,width:"660px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addNodeFormVisible=e},close:function(e){t.nodeForm={}}}},[a("el-form",{attrs:{"label-width":"120px"},model:{value:t.nodeForm,callback:function(e){t.nodeForm=e},expression:"nodeForm"}},[t.nodeForm.parentName?a("el-form-item",{attrs:{label:"上级目录：",prop:"parentName"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:t.nodeForm.parentName,callback:function(e){t.$set(t.nodeForm,"parentName",e)},expression:"nodeForm.parentName"}})],1):t._e(),a("el-form-item",{attrs:{label:"目录名称：",prop:"catalogName"}},[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveNode(e)}},model:{value:t.nodeForm.catalogName,callback:function(e){t.$set(t.nodeForm,"catalogName",e)},expression:"nodeForm.catalogName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.addNodeFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveNode}},[t._v("确 定")])],1)],1)],1)},u=[],m=(a("c5f6"),a("96cf"),a("3b8d")),f=a("b0b4"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container"},[a("div",{staticClass:"turn-back-button"},[a("el-button",{attrs:{type:"text"},on:{click:t.turnToPlanTree}},[t._v("返回列表 ")])],1),a("el-form",{staticClass:"template-base-form",attrs:{"label-width":"120px",size:"mini"},model:{value:t.inspectTemplate,callback:function(e){t.inspectTemplate=e},expression:"inspectTemplate"}},[a("el-row",{staticStyle:{"margin-top":"12px","border-bottom":"1px solid #eeeeee"}},[a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{label:"方案名称：",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.inspectTemplate.name,callback:function(e){t.$set(t.inspectTemplate,"name",e)},expression:"inspectTemplate.name"}})],1)],1),a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{size:"small",maxlength:255},model:{value:t.inspectTemplate.remark,callback:function(e){t.$set(t.inspectTemplate,"remark",e)},expression:"inspectTemplate.remark"}})],1)],1)],1)],1),a("el-form",{staticClass:"template-record-form",attrs:{size:"mini","label-width":"120px"},model:{value:t.resultConfigList,callback:function(e){t.resultConfigList=e},expression:"resultConfigList"}},[a("el-row",{staticStyle:{"margin-top":"16px"}},[a("div",{staticStyle:{"font-size":"14px",width:"108px","text-align":"right",height:"32px"}},[t._v("\n        巡检结果配置：\n      ")])]),t._l(t.resultConfigList,(function(e,i){return a("el-row",{key:i},[a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{label:"选项 "+i+"："}},[a("el-input",{attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"result.name"}})],1)],1),a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{label:"关联事件："}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择关联事件",filterable:"",size:"small",props:t.eventTypeProps,options:t.eventTypeOptions},on:{change:function(a){return t.formatConversion(e)}},model:{value:e.eventIds,callback:function(a){t.$set(e,"eventIds",a)},expression:"result.eventIds"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{"label-width":"20px"}},[a("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-close"},on:{click:function(a){return a.preventDefault(),t.removeResultConfigListItem(e)}}})],1)],1)],1)})),a("el-row",{staticStyle:{"margin-bottom":"16px"}},[t.showDeleteButton?a("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return e.preventDefault(),t.addResultConfigListItem(e)}}},[t._v("添加选项\n      ")]):t._e()],1)],2),a("el-form",{staticClass:"template-project-form",attrs:{"label-width":"120px"},model:{value:t.inspectProject,callback:function(e){t.inspectProject=e},expression:"inspectProject"}},[a("el-row",{staticStyle:{"padding-top":"16px","border-top":"1px solid #eeeeee"}},[a("div",{staticStyle:{"font-size":"14px",width:"108px","text-align":"right",height:"32px"}},[t._v("\n        巡检项目配置：\n      ")])]),t._l(t.inspectProject,(function(e,i){return a("el-row",{key:i,staticStyle:{"padding-top":"12px","border-bottom":"1px solid #eeeeee"}},[a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{label:"巡检项目组 "+i+"："}},[a("el-input",{attrs:{size:"small",placeholder:"分组标题"},model:{value:e.groupName,callback:function(a){t.$set(e,"groupName",a)},expression:"inspect.groupName"}})],1)],1),a("el-col",{staticClass:"fist-span"},[a("el-form-item",{attrs:{"label-width":"40px"}},[t.showDeleteButton?a("el-button",{staticStyle:{width:"28px",padding:"6px 6px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return e.preventDefault(),t.getOptionEditFromVisible(!1,i)}}}):t._e(),t.showDeleteButton?a("el-button",{attrs:{size:"mini",circle:"",type:"info",icon:"el-icon-close"},on:{click:function(a){return a.preventDefault(),t.removeItinerantProjectListItem(e)}}}):t._e()],1)],1),a("el-col",{staticStyle:{"padding-left":"120px"},attrs:{span:24}},[a("inspect-option-list",{attrs:{"options-list":e.attrs,"delete-button":t.showDeleteButton},on:{removeOptionItem:t.deleteItemInAttrs,itemDoEdit:t.editItemInAttrs}})],1)],1)})),a("el-row",{staticStyle:{"padding-top":"12px","border-top":"1px solid #eeeeee"}},[t.showDeleteButton?a("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return e.preventDefault(),t.addItinerantProjectListItem(e)}}},[t._v("添加项目分组\n      ")]):t._e(),t.showDeleteButton?a("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"primary",size:"small",icon:"el-icon-folder-checked"},on:{click:t.saveTemplateForms}},[t._v("保存方案\n      ")]):t._e()],1)],2),t.editFormVisible?a("inspect-option-edit",{on:{addSingleAttr:t.pushToAttrs,changeVisible:t.getOptionEditFromVisible}}):t._e()],1)},g=[],v=(a("28a5"),a("ac6a"),a("73ec")),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"option-edit-dialog",attrs:{visible:t.addOptionsDialog,"show-close":!1,title:"选项设置",center:"",width:"600px","close-on-click-modal":!1}},[a("el-form",{attrs:{"label-width":"100px",size:"mini"},model:{value:t.singleOption,callback:function(e){t.singleOption=e},expression:"singleOption"}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"itemName"}},[a("el-input",{attrs:{size:"small"},model:{value:t.singleOption.itemName,callback:function(e){t.$set(t.singleOption,"itemName",e)},expression:"singleOption.itemName"}})],1),a("el-form-item",{attrs:{label:"项目类型："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段类型",size:"small"},model:{value:t.singleOption.itemInputTypeCode,callback:function(e){t.$set(t.singleOption,"itemInputTypeCode",e)},expression:"singleOption.itemInputTypeCode"}},t._l(t.itemOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"选项设置："}},["select"===t.singleOption.itemInputTypeCode||"multiSelect"===t.singleOption.itemInputTypeCode?a("div",[t._l(t.singleOption.argTemplate.options,(function(e,i){return a("el-row",{key:i,staticStyle:{"margin-bottom":"6px"}},[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{size:"small"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"optionsItem.content"}})],1),a("el-col",{attrs:{span:6}},[a("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.defaultChosen,callback:function(a){t.$set(e,"defaultChosen",a)},expression:"optionsItem.defaultChosen"}},[t._v("默认选中 ")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:function(a){return a.preventDefault(),t.removeOptionItem(e)}}})],1)],1)})),a("el-row",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.addOptionItem}},[t._v("\n            添加选项\n          ")])],1)],2):t._e(),"number"===t.singleOption.itemInputTypeCode?a("div",[a("el-row",[a("el-input-number",{attrs:{precision:2,placeholder:"最小值",max:t.singleOption.argTemplate.numMax},model:{value:t.singleOption.argTemplate.numMin,callback:function(e){t.$set(t.singleOption.argTemplate,"numMin",e)},expression:"singleOption.argTemplate.numMin"}}),a("span",[t._v("  至  ")]),a("el-input-number",{attrs:{precision:2,placeholder:"最大值",min:t.singleOption.argTemplate.numMin},model:{value:t.singleOption.argTemplate.numMax,callback:function(e){t.$set(t.singleOption.argTemplate,"numMax",e)},expression:"singleOption.argTemplate.numMax"}})],1)],1):t._e(),"image"===t.singleOption.itemInputTypeCode?a("div",[a("el-row",[a("el-input-number",{attrs:{precision:0,placeholder:"最大张数"},model:{value:t.singleOption.argTemplate.imgMaxNum,callback:function(e){t.$set(t.singleOption.argTemplate,"imgMaxNum",e)},expression:"singleOption.argTemplate.imgMaxNum"}})],1)],1):t._e(),"text"===t.singleOption.itemInputTypeCode?a("div",[a("el-row",[a("el-input",{attrs:{size:"small",placeholder:"预设文本"},model:{value:t.singleOption.argTemplate.presetText,callback:function(e){t.$set(t.singleOption.argTemplate,"presetText",e)},expression:"singleOption.argTemplate.presetText"}})],1)],1):t._e()])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.changeVisibleFalse}},[t._v("\n      取消\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addOptionsToList("singleOption")}}},[t._v("\n      确 定\n    ")])],1)],1)},y=[],_=a("2fe1"),x=a("2f62"),I=(O("computed",x["e"]),O("computed",x["c"])),k=(O("methods",x["b"]),O("methods",x["d"]));function O(t,e){function a(a,i){return Object(_["a"])((function(n,o){n[t]||(n[t]={});var s,r=(s={},s[o]=a,s);n[t][o]=void 0!==i?e(i,r)[o]:e(r)[o]}))}function i(t,e){if("string"===typeof e){var i=e,n=t;return a(i,void 0)(n,i)}var o=T(e),s=t;return a(s,o)}return i}function T(t){var e=t&&t.namespace;if("string"===typeof e)return"/"!==e[e.length-1]?e+"/":e}var w=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.itemOptions=[{value:"select",label:"单项选择"},{value:"multiSelect",label:"多项选择"},{value:"number",label:"数值"},{value:"image",label:"图片"},{value:"text",label:"文本"},{value:"location",label:"定位"}],t.addOptionsDialog=!1,t.singleOption={argTemplate:{options:[]},multiSelectedItems:[]},t.inspectProjectList=[],t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"addOptionItem",value:function(){this.singleOption.argTemplate.options.push({})}},{key:"removeOptionItem",value:function(t){var e=this.singleOption.argTemplate.options.indexOf(t);-1!==e&&this.singleOption.argTemplate.options.splice(e,1)}},{key:"addOptionsToList",value:function(){this.addOptionsDialog=!1,"add"===this.mode?this.inspectProjectList.push(this.singleOption):this.inspectProjectList[this.itemIndex]=this.singleOption,this.$emit("addSingleAttr",this.singleOption),this.$emit("changeVisible",!1)}},{key:"changeVisibleFalse",value:function(){this.addOptionsDialog=!1,this.$emit("changeVisible",!1)}},{key:"mounted",value:function(){this.addOptionsDialog=this.dialogVisible,"edit"===this.mode?this.singleOption=this.itemInfo:this.singleOption={argTemplate:{options:[]}}}}]),e}(d["e"]);c["__decorate"]([I("getItemInfo")],w.prototype,"itemInfo",void 0),c["__decorate"]([I("getItemIndex")],w.prototype,"itemIndex",void 0),c["__decorate"]([I("getItemMode")],w.prototype,"mode",void 0),c["__decorate"]([I("getDialogVisible")],w.prototype,"dialogVisible",void 0),w=c["__decorate"]([d["a"]],w);var C=w,F=C,j=(a("ce05"),a("2877")),$=Object(j["a"])(F,b,y,!1,null,"2f594506",null),S=$.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{attrs:{"label-width":"100px",size:"mini","label-position":"left"},model:{value:t.transOptions,callback:function(e){t.transOptions=e},expression:"transOptions"}},t._l(t.transOptions,(function(e,i){return a("el-row",{key:i},[a("el-col",{staticClass:"second-span"},[a("el-form-item",{attrs:{label:e.itemName+"："}},["text"===e.itemInputTypeCode?a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.argTemplate.presetText,callback:function(a){t.$set(e.argTemplate,"presetText",a)},expression:"optionsItem.argTemplate.presetText"}}):t._e(),"number"===e.itemInputTypeCode?a("el-input-number",{attrs:{size:"small",max:e.argTemplate.numMax,min:e.argTemplate.numMin}}):t._e(),"select"===e.itemInputTypeCode?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.selectedItem,callback:function(a){t.$set(e,"selectedItem",a)},expression:"optionsItem.selectedItem"}},t._l(e.argTemplate.options,(function(t,e){return a("el-option",{key:e,attrs:{value:t.content,label:t.content}})})),1):t._e(),"multiSelect"===e.itemInputTypeCode?a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.multiSelectedItems,callback:function(a){t.$set(e,"multiSelectedItems",a)},expression:"optionsItem.multiSelectedItems"}},t._l(e.argTemplate.options,(function(t,e){return a("el-checkbox-button",{key:e,attrs:{value:t.content,label:t.content}})})),1):t._e(),"image"===e.itemInputTypeCode?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/formdesigner/form/uploadimg/",accept:".jpg,.jpeg,.png,.bmp","show-file-list":!1}},[a("el-button",{attrs:{size:"mini"}},[t._v("点击上传")]),a("div",{attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/jpeg/png/bmp文件，不超过 "+t._s(e.argTemplate.imgMaxNum)+" 张")])],1):t._e(),"location"===e.itemInputTypeCode?a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"定位地址"}},[a("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-location"},slot:"append"})],1):t._e()],1)],1),t.deleteButton?a("el-col",{staticStyle:{"padding-left":"40px"},attrs:{span:4}},[a("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-edit"},on:{click:function(a){return t.editItem(e)}}}),a("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-close"},on:{click:function(a){return t.deleteItem(e)}}})],1):t._e()],1)})),1)},M=[],P=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.transOptions=t.optionsList,t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"deleteItem",value:function(t){var e=this.transOptions.indexOf(t);-1!==e&&this.transOptions.splice(e,1),this.$emit("removeOptionItem",e,t)}},{key:"editItem",value:function(t){var e=this.transOptions.indexOf(t);this.setDialogVisible(!0),this.setItemIndex(e),this.setItemMode("edit"),this.setItemInfo(t),this.$emit("itemDoEdit",e,t)}},{key:"showDefaultChosen",value:function(t){if("select"===t.itemInputTypeCode)t.argTemplate.options.forEach((function(e){e.defaultChosen&&(t.selectedItem=e.content)}));else if("multiSelect"===t.itemInputTypeCode){var e=[];t.argTemplate.options.forEach((function(a){a.defaultChosen&&e.push(a.content),t.multiSelectedItems=e}))}return t}},{key:"setOptionsList",value:function(t){var e=this;this.transOptions=t,this.transOptions.forEach((function(t){e.showDefaultChosen(t)}))}}]),e}(d["e"]);c["__decorate"]([Object(d["d"])({type:Array,required:!0})],P.prototype,"optionsList",void 0),c["__decorate"]([Object(d["d"])({type:Boolean,required:!0,default:!1})],P.prototype,"deleteButton",void 0),c["__decorate"]([k("setItemInfo")],P.prototype,"setItemInfo",void 0),c["__decorate"]([k("setItemIndex")],P.prototype,"setItemIndex",void 0),c["__decorate"]([k("setItemMode")],P.prototype,"setItemMode",void 0),c["__decorate"]([k("setDialogVisible")],P.prototype,"setDialogVisible",void 0),c["__decorate"]([Object(d["f"])("optionsList",{deep:!0})],P.prototype,"setOptionsList",null),P=c["__decorate"]([d["a"]],P);var D=P,E=D,R=(a("440d"),Object(j["a"])(E,N,M,!1,null,"71a3e796",null)),V=R.exports,L={},z=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.inspectTemplate={},t.inspectProject=[{attrs:[]}],t.resultConfigList=[{}],t.resultDeleteIds=[],t.attrDeleteIds=[],t.editFormVisible=!1,t.showDeleteButton=!1,t.attrsIndex=0,t.eventTypeOptions=[],t.eventTypeProps={value:"id",label:"eventTypeName",children:"children"},t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"getEventTypeList",value:function(){var t=this;this.$http.get(L.eventType.getEventTypeTree,{params:{orgId:0}}).then((function(e){e.data.status?(t.eventTypeOptions=e.data.detail,v["a"].removeEmptyChildren(t.eventTypeOptions)):t.$message.error(e.data.message)}))}},{key:"addResultConfigListItem",value:function(){this.resultConfigList.push({})}},{key:"removeResultConfigListItem",value:function(t){var e=this.resultConfigList.indexOf(t);-1!==e&&this.resultConfigList.splice(e,1),this.resultDeleteIds.push(t.id)}},{key:"addItinerantProjectListItem",value:function(){this.inspectProject.push({attrs:[]}),this.editFormVisible=!1}},{key:"removeItinerantProjectListItem",value:function(t){var e=this,a=this.inspectProject.indexOf(t);-1!==a&&(this.inspectProject.splice(a,1),t.attrs.forEach((function(t){e.attrDeleteIds.push(t.id)})))}},{key:"getOptionEditFromVisible",value:function(t,e){this.setItemMode("add"),this.editFormVisible?(this.editFormVisible=t,this.setDialogVisible(!1)):(this.editFormVisible=!0,this.setDialogVisible(!0)),e&&(this.attrsIndex=e)}},{key:"pushToAttrs",value:function(t){"add"===this.mode?(this.inspectProject[this.attrsIndex].attrs.push(t),this.showDefaultChosen(t)):(this.inspectProject[this.attrsIndex].attrs[this.itemIndex]=t,this.showDefaultChosen(t))}},{key:"deleteItemInAttrs",value:function(t,e){this.inspectProject[this.attrsIndex].attrs.splice(t,1),this.attrDeleteIds.push(e.id)}},{key:"editItemInAttrs",value:function(){this.editFormVisible=!0}},{key:"saveTemplateForms",value:function(){var t=this;this.$http.post(L.inspect.saveTemplate,{inspectProject:this.inspectProject,inspectTemplate:this.inspectTemplate,resultConfigList:this.resultConfigList,resultDeleteIds:this.resultDeleteIds,attrDeleteIds:this.attrDeleteIds}).then((function(e){e.data.status?(t.$message.success("方案保存成功！"),t.turnToPlanTree()):t.$message.success(e.data.message)}))}},{key:"turnToPlanTree",value:function(){this.$emit("turnToPlanTree",!0)}},{key:"getPlanInfo",value:function(){var t=this;this.$http.get(L.inspect.getTemplateById+this.inspectTemplate.id).then((function(e){e.data.status?(t.inspectTemplate=e.data.data.inspectTemplate,t.inspectProject=e.data.data.inspectProject,t.resultConfigList=e.data.data.resultConfigList,t.resultConfigList.forEach((function(t){var e=[];if(t.eventId)for(var a=t.eventId.split("-"),i=0;i<a.length;i++){var n=parseInt(a[i]);e.push(n)}t.eventIds=e}))):t.$message.error(e.data.message)}))}},{key:"showDefaultChosen",value:function(t){if("select"===t.itemInputTypeCode)t.argTemplate.options.forEach((function(e){e.defaultChosen&&(t.selectedItem=e.content)}));else if("multiSelect"===t.itemInputTypeCode){var e=[];t.argTemplate.options.forEach((function(a){a.defaultChosen&&e.push(a.content),t.multiSelectedItems=e}))}return t}},{key:"mounted",value:function(){this.inspectTemplate.catalogId=this.preData.catalogId,"preview"===this.preData.mode?(this.inspectTemplate.id=this.preData.planId,this.showDeleteButton=!1,this.getPlanInfo()):"edit"===this.preData.mode?(this.inspectTemplate.id=this.preData.planId,this.showDeleteButton=!0,this.getPlanInfo()):(this.inspectTemplate.id="",this.showDeleteButton=!0)}}],[{key:"formatConversion",value:function(t){t.eventId=t.eventIds.join("-")}}]),e}(d["e"]);c["__decorate"]([Object(d["d"])({type:Object,required:!0})],z.prototype,"preData",void 0),c["__decorate"]([I("getItemInfo")],z.prototype,"itemInfo",void 0),c["__decorate"]([I("getItemMode")],z.prototype,"mode",void 0),c["__decorate"]([I("getItemIndex")],z.prototype,"itemIndex",void 0),c["__decorate"]([k("setItemMode")],z.prototype,"setItemMode",void 0),c["__decorate"]([k("setDialogVisible")],z.prototype,"setDialogVisible",void 0),z=c["__decorate"]([Object(d["a"])({components:{InspectOptionList:V,InspectOptionEdit:S}})],z);var B=z,A=B,G=(a("1dd3"),Object(j["a"])(A,h,g,!1,null,"9aaae88e",null)),q=G.exports,U=a("0797"),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan-edit-form"},[a("div",{staticClass:"form-title"},[t._v("方案基本配置：")]),a("el-form",{staticClass:"plan-base-form",attrs:{model:t.baseFrom,"label-width":"120px",inline:""}},[a("el-form-item",{attrs:{label:"方案名称：",prop:"name"}},[a("el-input",{staticStyle:{width:"320px"},attrs:{size:"small"},model:{value:t.baseFrom.name,callback:function(e){t.$set(t.baseFrom,"name",e)},expression:"baseFrom.name"}})],1),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{staticStyle:{width:"320px"},attrs:{size:"small"},model:{value:t.baseFrom.remark,callback:function(e){t.$set(t.baseFrom,"remark",e)},expression:"baseFrom.remark"}})],1)],1),a("div",{staticClass:"form-title"},[t._v("巡检结果配置：")]),a("el-form",{staticClass:"plan-result-form",attrs:{model:t.resultForm,"label-width":"120px"}},[t._l(t.resultForm.result,(function(e,i){return a("div",{key:i,staticClass:"result-form-item"},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"选项"+(i+1)+"："}},[a("el-input",{staticStyle:{width:"320px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"i.name"}})],1),a("el-form-item",{attrs:{label:"关联事件："}},[a("q-tree",{attrs:{"tree-prop":t.eventTypeProps,"tree-data":t.eventTypeOptions,needStringify:""},model:{value:e.eventId,callback:function(a){t.$set(e,"eventId",a)},expression:"i.eventId"}})],1),a("el-form-item",[a("el-button",{staticClass:"delete-button",attrs:{circle:"",icon:"el-icon-close",size:"small"},on:{click:function(a){return a.preventDefault(),t.removeResultListItem(e)}}})],1)],1)})),a("el-button",{staticStyle:{"text-align":"left","margin-left":"120px",width:"min-content"},attrs:{type:"text"},on:{click:function(e){return e.preventDefault(),t.addResultListItem(e)}}},[t._v("添加结果选项")])],2),a("div",{staticClass:"form-title"},[t._v("巡检项目配置：")]),a("el-form",{staticClass:"plan-template-form",attrs:{model:t.inspectProject,"label-width":"120px"}},t._l(t.inspectProject.inspects,(function(e,i){return a("el-form-item",{key:i,attrs:{label:"项目组"+(i+1)+"："}},[a("div",{staticClass:"item-controls"},[a("el-input",{staticStyle:{width:"320px"},attrs:{size:"small"},model:{value:e.groupName,callback:function(a){t.$set(e,"groupName",a)},expression:"n.groupName"}}),a("el-button",{staticStyle:{width:"28px",padding:"6px 6px","margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addItinerantProjectListItem(!1,i)}}}),a("el-button",{attrs:{size:"mini",circle:"",type:"info",icon:"el-icon-close"},on:{click:function(e){return e.preventDefault(),t.removeItinerantProject(t.inspect)}}})],1),a("div",{staticClass:"item-options"},[a("q-custom-input",{attrs:{"custom-options":e.attrs}})],1)])})),1),a("div",{staticClass:"plan-control-buttons"}),a("add-inspect-item",{attrs:{"dialog-title":"添加选项",data:t.optionItem,"dialog-visible":t.dialogVisible},on:{submit:t.initInspectItem}})],1)},J=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.addDialog,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addDialog=e},close:t.closeDialog}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"addForm",attrs:{size:"small","label-width":"120px",model:t.addForm,rules:t.formRules}},[a("el-row",{attrs:{gutter:4}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数据项名称：",prop:"attrName"}},[a("el-input",{attrs:{maxlength:7,placeholder:"请输入(不超过七个中文字符)",clearable:""},model:{value:t.addForm.attrName,callback:function(e){t.$set(t.addForm,"attrName",e)},expression:"addForm.attrName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"编码：",prop:"code"}},[a("el-input",{attrs:{maxlength:100,placeholder:"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位",clearable:""},model:{value:t.addForm.code,callback:function(e){t.$set(t.addForm,"code",e)},expression:"addForm.code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数据项类型：",prop:"attrType"}},[a("el-select",{staticClass:"inpW",attrs:{placeholder:"请选择"},on:{change:t.typeChange},model:{value:t.addForm.attrType,callback:function(e){t.$set(t.addForm,"attrType",e)},expression:"addForm.attrType"}},t._l(t.itemOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t.addForm.attrType?a("el-col",{attrs:{span:24}},["location"!==t.addForm.attrType?a("el-form-item",{attrs:{label:"选项设置："}},["select"===t.addForm.attrType||"multiSelect"===t.addForm.attrType?a("div",[t._l(t.addForm.dataRange.options,(function(e,i){return a("el-row",{key:i,staticStyle:{"margin-bottom":"6px"}},[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{size:"small",maxlength:100,clearable:""},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"optionsItem.content"}})],1),a("el-col",{attrs:{span:6}},[a("el-checkbox",{staticStyle:{"margin-left":"20px"},on:{change:function(e){return t.handleCheck(i)}},model:{value:e.defaultChosen,callback:function(a){t.$set(e,"defaultChosen",a)},expression:"optionsItem.defaultChosen"}},[t._v("默认选中")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:function(e){return e.preventDefault(),t.removeOptionItem(i)}}})],1)],1)})),a("el-row",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"text"},on:{click:t.addOptionItem}},[a("i",{staticClass:"font_family icon-xinzenglanse"}),t._v("\n                添加选项\n              ")])],1)],2):"number"===t.addForm.attrType?a("div",[a("el-row",[a("el-input-number",{attrs:{precision:2,placeholder:"最小值",max:t.addForm.dataRange.numMax},model:{value:t.addForm.dataRange.numMin,callback:function(e){t.$set(t.addForm.dataRange,"numMin",e)},expression:"addForm.dataRange.numMin"}}),a("span",[t._v("  至  ")]),a("el-input-number",{attrs:{precision:2,placeholder:"最大值",min:t.addForm.dataRange.numMin},model:{value:t.addForm.dataRange.numMax,callback:function(e){t.$set(t.addForm.dataRange,"numMax",e)},expression:"addForm.dataRange.numMax"}})],1)],1):"image"===t.addForm.attrType?a("div",[a("el-row",[a("span",[t._v("最大张数  ")]),a("el-input-number",{attrs:{precision:0,min:1,max:9,placeholder:"最大张数"},model:{value:t.addForm.dataRange.imgMaxNum,callback:function(e){t.$set(t.addForm.dataRange,"imgMaxNum",e)},expression:"addForm.dataRange.imgMaxNum"}})],1)],1):"text"===t.addForm.attrType?a("div",[a("el-row",[a("el-input",{attrs:{size:"small",placeholder:"预设文本",maxlength:300,clearable:""},model:{value:t.addForm.dataRange.presetText,callback:function(e){t.$set(t.addForm.dataRange,"presetText",e)},expression:"addForm.dataRange.presetText"}})],1)],1):"location"===t.addForm.attrType?a("div",[a("el-row",[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"定位地址",disabled:""},model:{value:t.addForm.dataRange.position,callback:function(e){t.$set(t.addForm.dataRange,"position",e)},expression:"addForm.dataRange.position"}})],1)],1):t._e()]):t._e()],1):t._e(),"number"===t.addForm.attrType?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数值单位："}},[a("el-input",{attrs:{maxlength:10,clearable:""},model:{value:t.addForm.dataRange.unit,callback:function(e){t.$set(t.addForm.dataRange,"unit",e)},expression:"addForm.dataRange.unit"}})],1)],1):t._e()],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.closeDialog}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveSensorAttribute()}}},[t._v("确定")])],1)],1)],1)},Q=[],W=(window.AMap,function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.itemOptions=[{value:"select",label:"单项选择"},{value:"multiSelect",label:"多项选择"},{value:"number",label:"数值"},{value:"image",label:"图片"},{value:"text",label:"文本"},{value:"location",label:"定位"}],t.addDialog=!1,t.addForm={id:"",baseTypeId:"",code:"",attrName:"",attrType:"",sort:"",dataRange:{options:[],multiSelectedItems:[]}},t.formRules={attrName:{required:!0,trigger:"blur",message:"请输入数据项名称"},code:{required:!0,trigger:"blur",message:"请输入编码"},attrType:{required:!0,trigger:"blur",message:"请选择数据项类型"}},t.loading=!1,t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"handleVisible",value:function(t){var e=this;this.addDialog=t,t&&this.$nextTick((function(){var t=e.$refs.addForm;t.resetFields(),e.addForm=JSON.parse(JSON.stringify(e.data))}))}},{key:"closeDialog",value:function(){this.$emit("close")}},{key:"saveSensorAttribute",value:function(){var t=this,e=this.$refs.addForm;e.validate((function(e){if(!e)return!1;switch(t.addForm.attrType){case"select":case"multiSelect":if(0===t.addForm.dataRange.options.length)return void t.$message.info("请添加选项");break;case"number":if(""===t.addForm.dataRange.numMin||void 0===t.addForm.dataRange.numMin||""===t.addForm.dataRange.numMax||void 0===t.addForm.dataRange.numMax)return void t.$message.info("请设置最大值或最小值");break;case"image":if(""===t.addForm.dataRange.imgMaxNum||void 0===t.addForm.dataRange.imgMaxNum)return void t.$message.info("请设置图片的最大张数");break}t.$emit("submit",t.addForm)}))}},{key:"removeOptionItem",value:function(t){this.addForm.dataRange.options.splice(t,1)}},{key:"addOptionItem",value:function(){"select"===this.addForm.attrType||"multiSelect"===this.addForm.attrType?this.addForm.dataRange.options.push({content:"",defaultChosen:!1}):this.addForm.dataRange.options.push({})}},{key:"typeChange",value:function(){"select"===this.addForm.attrType||"multiSelect"===this.addForm.attrType?(this.addForm.dataRange.options=[],this.addForm.dataRange.multiSelectedItems=[]):"number"===this.addForm.attrType?(this.$set(this.addForm.dataRange,"numMin",0),this.$set(this.addForm.dataRange,"numMax",10),this.$set(this.addForm.dataRange,"unit","")):"text"===this.addForm.attrType?this.$set(this.addForm.dataRange,"presetText",""):"image"===this.addForm.attrType&&this.$set(this.addForm.dataRange,"imgMaxNum",1)}},{key:"handleCheck",value:function(t){if(this.addForm.dataRange.options[t].defaultChosen&&"select"===this.addForm.attrType){for(var e in this.addForm.dataRange.options)this.addForm.dataRange.options[e].defaultChosen=!1;this.addForm.dataRange.options[t].defaultChosen=!0}}}]),e}(d["e"]));c["__decorate"]([Object(d["d"])({type:String,default:"添加应用分类"})],W.prototype,"dialogTitle",void 0),c["__decorate"]([Object(d["d"])({type:Boolean,default:!1})],W.prototype,"dialogVisible",void 0),c["__decorate"]([Object(d["d"])({type:Object,default:function(){return{}}})],W.prototype,"data",void 0),c["__decorate"]([Object(d["f"])("dialogVisible")],W.prototype,"handleVisible",null),W=c["__decorate"]([Object(d["a"])({components:{}})],W);var X=W,Y=X,Z=(a("1f6b"),Object(j["a"])(Y,K,Q,!1,null,"b3e86464",null)),tt=Z.exports,et=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.baseFrom={},t.resultForm={result:[]},t.inspectProject={inspects:[]},t.eventTypeOptions=[],t.eventTypeProps={value:"id",label:"name",children:"children"},t.optionItem={},t.dialogVisible=!1,t.currentIndex=0,t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"getEventOptions",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get(U["a"].other.getAllEventType);case 3:e=t.sent,a=e.data,i=a.data,n=a.status,o=a.message,n?this.eventTypeOptions=i:this.$message.error(o),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"addResultListItem",value:function(){this.resultForm.result.push({})}},{key:"removeResultListItem",value:function(t){var e=this.resultForm.result.indexOf(t);-1!==e&&this.resultForm.result.splice(e,1)}},{key:"addItinerantProjectListItem",value:function(t,e){this.dialogVisible=!0,this.currentIndex=e,this.optionItem={id:"",baseTypeId:"",code:"",attrName:"",attrType:"",sort:"",dataRange:{options:[],multiSelectedItems:[]}}}},{key:"removeItinerantProjectListItem",value:function(t){}},{key:"initInspectItem",value:function(t){this.inspectProject.inspects[this.currentIndex].attrs.push(t)}},{key:"removeItinerantProject",value:function(t){}},{key:"created",value:function(){this.resultForm.result=[{name:"",eventId:""}],this.inspectProject.inspects=[{groupName:"",attrs:[]}],this.getEventOptions()}}]),e}(d["e"]);c["__decorate"]([Object(d["d"])({type:String,default:"add"})],et.prototype,"mode",void 0),et=c["__decorate"]([Object(d["a"])({components:{AddInspectItem:tt}})],et);var at=et,it=at,nt=(a("7794"),Object(j["a"])(it,H,J,!1,null,"76bfe4c2",null)),ot=nt.exports,st=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.plansName="",t.manageButtonsVisible=!1,t.selectButtonsVisible=!1,t.planEditFormVisible=!1,t.loading=!1,t.plansData=[],t.plansProp={children:"children",label:"catalogName"},t.templatesList=[],t.editMode={planId:0,catalogId:"",mode:"add"},t.selected=0,t.chosenItem={},t.addNodeFormVisible=!1,t.nodeForm={},t}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"planView",value:function(t,e){this.editMode.mode="review",this.editMode.planId=t,this.editMode.catalogId=e,this.planEditFormVisible=!0}},{key:"planEdit",value:function(t,e){this.editMode.mode="edit",this.editMode.planId=t,this.editMode.catalogId=e,this.planEditFormVisible=!0}},{key:"handleDelete",value:function(t){var e=this;this.$http.get(U["a"].deleteTemplate+t).then((function(t){t.data.status?e.$message.success("删除成功"):e.$message.error(t.data.message)})),this.getCatalogTree()}},{key:"createNewPlan",value:function(){this.editMode.mode="add",this.planEditFormVisible=!0}},{key:"selectedItem",value:function(t){this.selected=t.id,this.$emit("inspectPlanInfo",t)}},{key:"changeInspectPlanVisible",value:function(t){this.planEditFormVisible=!t,this.handleNodeClick(this.chosenItem)}},{key:"getCatalogTree",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("".concat(U["a"].catalog.typeTree,"INSPECT_PlAN_CODE"));case 3:e=t.sent,a=e.data,i=a.data,n=a.status,o=a.message,n?(this.plansData=[],this.plansData.push(i)):this.$message.error(o),t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](0),t.abrupt("return","error");case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"openNodeForm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log(a),"edit"===t?(this.nodeForm=e,this.nodeForm.parentName=a.parent.data.catalogName):e?(this.nodeForm.parentId=e.id,this.nodeForm.parentName=e.catalogName,this.nodeForm.catalogType="INSPECT_PlAN_CODE"):this.nodeForm={catalogType:"INSPECT_PlAN_CODE",parentId:null,parentName:null},this.addNodeFormVisible=!0}},{key:"saveNode",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.post(U["a"].catalog.add,this.nodeForm);case 3:e=t.sent,a=e.data,a.data,i=a.status,n=a.message,i?this.$message.success("保存成功"):this.$message.error(n),this.addNodeFormVisible=!1,this.getCatalogTree(),t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return","error");case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleNodeClick",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.editMode.catalogId=e.id,this.chosenItem=e,t.next=5,this.$http.get(U["a"].template.list+e.id);case 5:a=t.sent,i=a.data,n=i.data,o=i.status,s=i.message,o?(this.plansName=e.catalogName,this.templatesList=n):this.$message.error(s),this.loading=!1;case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeTreeNode",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get(U["a"].catalog.delete+e.id);case 3:a=t.sent,i=a.data,i.data,i.status,i.message,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"openPlanEditForm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log(a),a?(this.planEditFormVisible=!0,"add"===t?this.editMode.mode="add":(this.editMode.mode=t,this.editMode.planId=e,this.editMode.catalogId=a)):this.$message.warning("请先选择方案！")}},{key:"created",value:function(){this.manageButtonsVisible="manage"===this.mode,this.selectButtonsVisible="choose"===this.mode,this.selected=this.id?this.id:0,this.getCatalogTree()}}]),e}(d["e"]);c["__decorate"]([Object(d["d"])({type:String,required:!0,default:""})],st.prototype,"mode",void 0),c["__decorate"]([Object(d["d"])({type:Number,default:0})],st.prototype,"id",void 0),st=c["__decorate"]([Object(d["a"])({components:{PlanEdit:ot,PlanEditForm:q}})],st);var rt=st,lt=rt,ct=(a("5c5e"),Object(j["a"])(lt,p,u,!1,null,"4c54c348",null)),dt=ct.exports,pt=function(t){function e(){return Object(o["a"])(this,e),Object(s["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(d["e"]);pt=c["__decorate"]([Object(d["a"])({components:{PlansTree:dt}})],pt);var ut=pt,mt=ut,ft=Object(j["a"])(mt,i,n,!1,null,"2fc04e6e",null);e["default"]=ft.exports},"719d":function(t,e,a){},7794:function(t,e,a){"use strict";var i=a("5b2e"),n=a.n(i);n.a},"7c87":function(t,e,a){},ce05:function(t,e,a){"use strict";var i=a("2e21f"),n=a.n(i);n.a},ec15:function(t,e,a){}}]);
//# sourceMappingURL=chunk-c02b91ec.e79c26c0.js.map