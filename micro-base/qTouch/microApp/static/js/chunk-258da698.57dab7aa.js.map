{"version":3,"sources":["webpack://micro_[name]/./src/microApps/organization/views/organizeManage/Organization.vue?a57e","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/Organization.vue?ec7a","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/components/AddOrg.vue?0471","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/components/AddOrg.vue","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/components/AddOrg.vue?4754","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/components/AddOrg.vue?fd4a","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/Organization.vue","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/Organization.vue?c78c","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/Organization.vue?d3fc","webpack://micro_[name]/./src/microApps/organization/api/index.ts","webpack://micro_[name]/./src/microApps/organization/views/organizeManage/components/AddOrg.vue?cbda"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","staticStyle","attrs","basicForm","on","$event","editOrg","slot","model","treeMessage","callback","$$v","$set","ref","data","defaultProps","filterNode","orgNodeClick","scopedSlots","_u","key","fn","node","style","width","treeLevel","_v","_s","label","remove","id","customOptions","_e","type","currentId","parentId","closeDialog","staticRenderFns","dialogTitle","_m","addForm","formRules","typeDetailOptions","changeCustomOptions","_l","option","saveOrgInfo","children","isLoading","enterOptions","orgVisible","enterpriseFlag","required","message","trigger","code","typeDetailId","hasCustomRole","qTouch","getBaseTypeByCode","baseTypeList","baseTypeName","$emit","orgId","$http","get","getOrgInfo","then","response","status","orgInfo","extInfoVO","$message","error","finally","findTypeTree","res","checked","$refs","orgTree","setCheckedKeys","typeDetailIds","getCheckedKeys","length","getBaseTypeList","getTemplateByTypeDetaiId","customInput","formValidation","validate","valid","doSave","url","updateOrgBaseInfo","addOrgBaseInfo","getFilledCustomOptions","org","JSON","parse","stringify","Object","assign","extInfo","post","success","getOrgType","String","default","components","component","filterText","orgAccess","visibleDialog","pageLoading","doLoading","testData","indexOf","val","filter","getOrgTreeData","split","arr","i","disabled","setDisabled","opt","$confirm","confirmButtonText","cancelButtonText","delete","getTreeData","showClose","AddOrg","api","getTypeDetail","getAttrList","getTypeAndAttrs","saveOrUpdateTypeAndAttrs","saveCustomAttrItems","deleteType","saveOrgAccess","download","upload"],"mappings":"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","file":"static/js/chunk-258da698.57dab7aa.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Organization.vue?vue&type=style&index=0&id=aa45e852&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Organization.vue?vue&type=style&index=0&id=aa45e852&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.pageLoading),expression:\"pageLoading\"}],staticClass:\"container\"},[(_vm.visibleDialog)?_c('div',{staticClass:\"main\"},[_c('q-left-right-layout',{staticStyle:{\"width\":\"100%\"},attrs:{\"left-title\":\"组织机构树\",\"right-title\":_vm.basicForm.name + '详情',\"btn-tip\":\"添加一级菜单\"},on:{\"click\":function($event){return _vm.editOrg('addTop', null)}}},[_c('div',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('el-input',{staticClass:\"inpW\",attrs:{\"placeholder\":\"输入关键字进行过滤\",\"maxlength\":100,\"size\":\"small\"},model:{value:(_vm.treeMessage.filterText),callback:function ($$v) {_vm.$set(_vm.treeMessage, \"filterText\", $$v)},expression:\"treeMessage.filterText\"}}),_c('div',{staticClass:\"tree-body\"},[_c('el-tree',{ref:\"orgTree\",staticClass:\"filter-tree\",attrs:{\"data\":_vm.treeMessage.data,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"highlight-current\":\"\",\"expand-on-click-node\":false,\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.orgNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('div',{staticClass:\"tree-node\"},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"text-overflow\":\"ellipsis\",\"overflow\":\"hidden\",\"white-space\":\"nowrap\",\"word-break\":\"keep-all\"},style:({ width: 200 - (node.treeLevel - 1) * 18 + 'px' })},[_vm._v(_vm._s(node.label))]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.editOrg('add', data)}}}),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.editOrg('edit', data)}}}),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.remove(data.id)}}})],1)])}}],null,false,3091244643)})],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.doLoading),expression:\"doLoading\"}],key:_vm.basicForm.id,staticClass:\"submain-content\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"基础信息\")]),_c('div',{staticClass:\"basic-attribute-body\"},[_c('el-form',{attrs:{\"label-width\":\"100px\",\"size\":\"mini\",\"status-icon\":\"\",\"model\":_vm.basicForm}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织名称：\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},attrs:{\"id\":\"org-name\",\"disabled\":\"\"},model:{value:(_vm.basicForm.name),callback:function ($$v) {_vm.$set(_vm.basicForm, \"name\", $$v)},expression:\"basicForm.name\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织类型：\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},attrs:{\"disabled\":\"\"},model:{value:(_vm.basicForm.typeName),callback:function ($$v) {_vm.$set(_vm.basicForm, \"typeName\", $$v)},expression:\"basicForm.typeName\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织编码：\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},attrs:{\"disabled\":\"\"},model:{value:(_vm.basicForm.code),callback:function ($$v) {_vm.$set(_vm.basicForm, \"code\", $$v)},expression:\"basicForm.code\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"单位状态：\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},attrs:{\"disabled\":\"\"},model:{value:(_vm.basicForm.enterpriseFlag),callback:function ($$v) {_vm.$set(_vm.basicForm, \"enterpriseFlag\", $$v)},expression:\"basicForm.enterpriseFlag\"}})],1)],1)],1)],1)],1),_c('el-divider'),(_vm.hasCustomRole)?[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"自定义信息\")]),_c('q-custom-input',{ref:\"custom-input\",attrs:{\"customOptions\":_vm.customOptions,\"disabled\":true}})]:_vm._e(),_c('el-divider'),(false)?[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-s-data\"}),_vm._v(\"数据维护信息\")]),(_vm.orgAccess && _vm.orgAccess.length > 0)?_c('el-row',{attrs:{\"gutter\":20}},_vm._l((_vm.orgAccess),function(access){return _c('el-col',{key:access.typeId,staticClass:\"access-box\",attrs:{\"span\":8}},[_c('el-select',{staticClass:\"inpW\",attrs:{\"placeholder\":\"请选择\",\"size\":\"small\",\"disabled\":\"\"},model:{value:(access.typeId),callback:function ($$v) {_vm.$set(access, \"typeId\", $$v)},expression:\"access.typeId\"}},_vm._l((_vm.baseTypeList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.baseTypeName,\"value\":item.id,\"disabled\":item.disabled}})}),1),_c('div',{staticStyle:{\"padding\":\"0 15px\"}},[_c('el-tree',{ref:\"accessTree\",refInFor:true,attrs:{\"id\":access.typeId,\"data\":access.treeData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":true,\"show-checkbox\":\"\",\"expand-on-click-node\":false,\"default-checked-keys\":access.access}})],1)],1)}),1):_vm._e()]:_vm._e()],2)])],1):_c('add-org',{attrs:{\"type\":_vm.type,\"id\":_vm.currentId,\"parentId\":_vm.parentId},on:{\"close\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"add-org\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.dialogTitle))]),_c('div',{staticClass:\"basic-body\"},[_vm._m(0),_c('el-form',{ref:\"addForm\",attrs:{\"size\":\"small\",\"label-width\":\"100px\",\"model\":_vm.addForm,\"rules\":_vm.formRules}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织名称：\",\"prop\":\"name\"}},[_c('el-input',{staticStyle:{\"max-width\":\"500px\"},attrs:{\"maxlength\":100,\"placeholder\":\"请输入\",\"clearable\":\"\"},model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织类型：\",\"prop\":\"typeDetailId\"}},[_c('q-tree',{attrs:{\"tree-data\":_vm.typeDetailOptions,\"tree-prop\":{ value: 'id', label: 'name' },\"multi\":false,\"need-stringify\":true,\"closable\":false},on:{\"qClick\":_vm.changeCustomOptions},model:{value:(_vm.addForm.typeDetailId),callback:function ($$v) {_vm.$set(_vm.addForm, \"typeDetailId\", $$v)},expression:\"addForm.typeDetailId\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"组织编码：\",\"prop\":\"code\"}},[_c('el-input',{staticStyle:{\"max-width\":\"500px\"},attrs:{\"placeholder\":\"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位\",\"maxlength\":100,\"clearable\":\"\"},model:{value:(_vm.addForm.code),callback:function ($$v) {_vm.$set(_vm.addForm, \"code\", $$v)},expression:\"addForm.code\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"单位状态：\",\"prop\":\"enterpriseFlag\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\",\"max-width\":\"400px\"},model:{value:(_vm.addForm.enterpriseFlag),callback:function ($$v) {_vm.$set(_vm.addForm, \"enterpriseFlag\", $$v)},expression:\"addForm.enterpriseFlag\"}},_vm._l((_vm.enterOptions),function(option){return _c('el-option',{key:option.value,attrs:{\"label\":option.label,\"value\":option.value}})}),1)],1)],1)],1)],1)],1),(_vm.hasCustomRole)?_c('div',{staticClass:\"basic-body\"},[_vm._m(1),_c('q-custom-input',{ref:\"customInput\",attrs:{\"customOptions\":_vm.customOptions}})],1):_vm._e(),_c('div',{staticClass:\"dialog-footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"返回\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.saveOrgInfo}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"基础信息\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"自定义信息\")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n *\r\n * @author fqq\r\n */\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\n\r\nimport Url from \"../../../api\";\r\nimport Utils from \"@/utils/utils\";\r\nimport { ElTree } from \"element-ui/types/tree\";\r\n\r\n@Component({\r\n  components: {}\r\n})\r\nexport default class AddOrg extends Vue {\r\n  @Prop({ type: String, default: \"add\" })\r\n  type?: string;\r\n\r\n  @Prop({ type: [String, Object], default: null })\r\n  id?: any;\r\n\r\n  @Prop({ type: [String, Object], default: null })\r\n  parentId?: any;\r\n\r\n  // 配置选项\r\n  defaultProps: any = {\r\n    value: \"id\",\r\n    label: \"name\",\r\n    children: \"children\"\r\n  };\r\n\r\n  isLoading: boolean = false;\r\n\r\n  dialogTitle = \"\";\r\n\r\n  //单位属性下拉框\r\n  enterOptions: any = [{ label: \"否\", value: 0 }, { label: \"是\", value: 1 }];\r\n  // 组织机构类型树\r\n  typeDetailOptions: Array<any> = [];\r\n  orgVisible: boolean = false;\r\n\r\n  addForm: any = {\r\n    enterpriseFlag: 0\r\n  };\r\n  formRules: any = {\r\n    name: [\r\n      {\r\n        required: true,\r\n        message: \"该选项为必填项\",\r\n        trigger: \"change\"\r\n      }\r\n    ],\r\n    code: [\r\n      {\r\n        required: true,\r\n        message: \"该选项为必填项\",\r\n        trigger: \"change\"\r\n      }\r\n    ],\r\n    typeDetailId: [\r\n      {\r\n        required: true,\r\n        message: \"该选项为必填项\",\r\n        trigger: \"blur\"\r\n      }\r\n    ]\r\n  };\r\n\r\n  hasCustomRole: boolean = qTouch.getBaseTypeByCode(\"organization\");\r\n\r\n  // 表单使用的组织信息\r\n  // orgAccess = [{ typeId: null, treeData: [] }];\r\n\r\n  // 自定义属性\r\n  customOptions: Array<any> = [];\r\n\r\n  //数据绑定basetype下拉框，基础属性类型列表\r\n  baseTypeList: any = [{ id: \"\" }, { baseTypeName: \"\" }];\r\n\r\n  closeDialog() {\r\n    this.$emit(\"close\");\r\n  }\r\n\r\n  //获取组织信息\r\n  getOrgInfo(orgId: any) {\r\n    this.isLoading = true;\r\n    this.$http\r\n      .get(Url.getOrgInfo + \"/\" + orgId)\r\n      .then((response: any) => {\r\n        if (response.data.status) {\r\n          this.addForm = response.data.data.orgInfo;\r\n          // this.addForm.enterpriseFlag = this.addForm.enterpriseFlag ? 0 : this.addForm.enterpriseFlag;\r\n          // this.orgAccess = response.data.data.orgAccess;\r\n          // this.orgAccess.forEach((item: any) => {\r\n          //   // 禁用已经配置的选项\r\n          //   this.baseTypeList.some((temp: any) => {\r\n          //     if (temp.id == item.typeId) {\r\n          //       temp.disabled = true;\r\n          //       return true;\r\n          //     }\r\n          //   });\r\n          //   item.access = item.access != null ? item.access.split(\",\") : [];\r\n          // });\r\n          this.customOptions = this.addForm.extInfoVO ? this.addForm.extInfoVO : [];\r\n        } else {\r\n          this.$message.error(response.data.message);\r\n        }\r\n      })\r\n      .finally(() => {\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  // 组织类型\r\n  getOrgType() {\r\n    this.orgVisible = true;\r\n    this.$http.get(Url.findTypeTree + \"/organization\").then((res: any) => {\r\n      if (res.data.status) {\r\n        this.typeDetailOptions = res.data.data;\r\n        // this.$nextTick(() => {\r\n        //   (this.$refs.orgTree as ElTree).setCheckedKeys([this.addForm.typeDetailId]);\r\n        // });\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 类型树只允许单选\r\n  handleOrgChange(data: any, checked: boolean) {\r\n    if (checked) {\r\n      (this.$refs.orgTree as any).setCheckedKeys([data.id]);\r\n    }\r\n  }\r\n\r\n  // 确定类型\r\n  saveOrg() {\r\n    let typeDetailIds = (this.$refs.orgTree as any).getCheckedKeys();\r\n    if (typeDetailIds.length) {\r\n      this.addForm.typeDetailId = typeDetailIds[0];\r\n    } else {\r\n      this.addForm.typeDetailId = \"\";\r\n    }\r\n    this.orgVisible = false;\r\n    if (this.addForm.typeDetailId) {\r\n      this.changeCustomOptions();\r\n    }\r\n  }\r\n\r\n  //获取基础属性类型列表\r\n  getBaseTypeList() {\r\n    this.$http.get(Url.getBaseTypeList).then((res: any) => {\r\n      if (res.status) {\r\n        this.baseTypeList = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  //类型变化时重新渲染自定义信息\r\n  changeCustomOptions() {\r\n    this.$http.get(Url.getTemplateByTypeDetaiId + \"/\" + this.addForm.typeDetailId).then((res: any) => {\r\n      if (res.data.status) {\r\n        this.customOptions = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获得组件CustomInput填充之后的数据\r\n  async getFilledCustomOptions() {\r\n    let customInput: any = this.$refs[\"customInput\"];\r\n    if (customInput) {\r\n      return await customInput.formValidation();\r\n    }\r\n    return null;\r\n  }\r\n\r\n  //保存组织机构基本信息\r\n  saveOrgInfo() {\r\n    //验证基本信息表单\r\n    (this.$refs[\"addForm\"] as any).validate((valid: any) => {\r\n      if (valid) {\r\n        //处理子组件自定义信息数据\r\n        this.doSave();\r\n      }\r\n    });\r\n  }\r\n\r\n  //请求后台保存组织信息\r\n  async doSave() {\r\n    let url = this.type === \"edit\" ? Url.updateOrgBaseInfo : Url.addOrgBaseInfo;\r\n    this.getFilledCustomOptions().then(data => {\r\n      this.isLoading = true;\r\n      let org = JSON.parse(JSON.stringify(Object.assign(this.addForm, { extInfo: data })));\r\n      this.$http\r\n        .post(url, org)\r\n        .then((res: any) => {\r\n          if (res.data.status) {\r\n            this.$message.success(\"操作成功\");\r\n            this.addForm.id = res.data.data.id;\r\n            this.closeDialog();\r\n            // this.saveOrgAccessInfo(res.data.data.id); //保存权限信息\r\n          } else {\r\n            this.$message.error(res.data.message);\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.isLoading = false;\r\n        });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * -=====================\r\n   * 权限相关\r\n   */\r\n  //数据权限下拉框值改变\r\n  // accessSelectChange(val: any, index: number) {\r\n  //   let typeCode = \"\";\r\n  //   this.baseTypeList.some((item: any) => {\r\n  //     if (item.id == val) {\r\n  //       typeCode = item.code;\r\n  //       item.disabled = true;\r\n  //       return true;\r\n  //     }\r\n  //   });\r\n  //   //获取权限树\r\n  //   this.$http.get(Url.findTypeTree + \"/\" + typeCode).then((res: any) => {\r\n  //     if (res.status) {\r\n  //       if (res.data.status) {\r\n  //         this.orgAccess[index].treeData = res.data.data;\r\n  //       } else {\r\n  //         this.$message({\r\n  //           showClose: true,\r\n  //           message: res.data.message,\r\n  //           type: \"error\"\r\n  //         });\r\n  //       }\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  //保存权限信息\r\n  // saveOrgAccessInfo(orgId: any) {\r\n  // let saveArr: any = [];\r\n  // this.orgAccess.forEach((item: any, idx: any) => {\r\n  //   let typeDetails: any = [];\r\n  //   (this.$refs.accessTree as any).forEach((access: any) => {\r\n  //     if (access.$attrs.id == item.typeId) {\r\n  //       typeDetails = access.getCheckedKeys().toString();\r\n  //       return true;\r\n  //     }\r\n  //   });\r\n  //   let saveObj = {\r\n  //     orgId: orgId,\r\n  //     baseTypeId: item.typeId,\r\n  //     typeDetails: typeDetails\r\n  //   };\r\n  //   saveArr.push(saveObj);\r\n  // });\r\n  // this.$http.post(Url.saveOrgAccess + \"/\" + orgId, saveArr).then((res: any) => {\r\n  //   if (res.data.status) {\r\n  //     this.$message.success(res.data.message);\r\n  //     this.closeDialog();\r\n  //   } else {\r\n  //     this.$message.error(res.data.message);\r\n  //   }\r\n  // });\r\n  // return;\r\n  // }\r\n\r\n  //增加数据权限按钮\r\n  // addAccess() {\r\n  //   this.orgAccess.push({\r\n  //     typeId: null,\r\n  //     treeData: []\r\n  //   });\r\n  // }\r\n\r\n  // 移除权限项\r\n  // removeAccess(val: any) {\r\n  //   Utils.removeArrItemByValue(this.orgAccess, val); //删除权限项\r\n  //   this.baseTypeList.forEach((item: any) => {\r\n  //     if (item.id == val.typeId) {\r\n  //       item.disabled = false;\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  created() {\r\n    this.getBaseTypeList(); // 获取团队能见基础属性类型，用于编辑数据权限\r\n    this.getOrgType();\r\n    if (this.type === \"edit\") {\r\n      this.dialogTitle = \"编辑组织机构\";\r\n      this.getOrgInfo(this.id);\r\n    } else {\r\n      this.dialogTitle = \"添加组织机构\";\r\n      if (this.type === \"add\") {\r\n        this.addForm.parentId = this.parentId;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrg.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrg.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddOrg.vue?vue&type=template&id=d926e95c&scoped=true&\"\nimport script from \"./AddOrg.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddOrg.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddOrg.vue?vue&type=style&index=0&id=d926e95c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d926e95c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\r\nimport AddOrg from \"./components/AddOrg.vue\";\r\n\r\nimport Url from \"../../api\";\r\nimport Utils from \"@/utils/utils\";\r\n\r\n@Component({\r\n  components: {\r\n    AddOrg\r\n  }\r\n})\r\nexport default class Organization extends Vue {\r\n  // 组织机构树\r\n  treeMessage: any = {\r\n    filterText: \"\",\r\n    data: []\r\n  };\r\n  // 配置选项\r\n  defaultProps: any = {\r\n    value: \"id\",\r\n    label: \"name\",\r\n    children: \"children\"\r\n  };\r\n\r\n  basicForm: any = {\r\n    id: \"\",\r\n    name: \"\",\r\n    typeDetailId: \"\",\r\n    enterpriseFlag: \"\",\r\n    extInfoVO: []\r\n  };\r\n  orgAccess = [];\r\n  customOptions = [];\r\n  baseTypeList: any = [{ id: \"\" }, { baseTypeName: \"\" }];\r\n\r\n  parentId: any = null;\r\n  currentId: any = null;\r\n  type = \"\";\r\n  visibleDialog = true;\r\n  pageLoading: boolean = true;\r\n  doLoading: boolean = true;\r\n  hasCustomRole: boolean = qTouch.getBaseTypeByCode(\"organization\");\r\n\r\n  testData: string = \"800d19c845d03b9315a6063d43597522\";\r\n\r\n  // 过滤tree\r\n  filterNode(value: any, data: any) {\r\n    if (!value) return true;\r\n    return data[this.defaultProps.label].indexOf(value) !== -1;\r\n  }\r\n\r\n  // 监听是否tree过滤条件\r\n  @Watch(\"treeMessage.filterText\")\r\n  setFilterText(val: any) {\r\n    (this.$refs.orgTree as any).filter(val);\r\n  }\r\n\r\n  //获取组织机构树\r\n  getTreeData() {\r\n    this.pageLoading = true;\r\n    this.$http.get(Url.getOrgTreeData).then((res: any) => {\r\n      this.pageLoading = false;\r\n      if (res.data.status) {\r\n        this.treeMessage.data = res.data.data;\r\n        let id = this.basicForm.id ? this.basicForm.id : this.treeMessage.data[0] ? this.treeMessage.data[0].id : \"\";\r\n        if (id) this.getOrgInfo(id);\r\n        this.doLoading = false;\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  //获取组织信息\r\n  async getOrgInfo(orgId: any) {\r\n    this.doLoading = true;\r\n    try {\r\n      let {\r\n        data: { data, status, message }\r\n      } = await this.$http.get(Url.getOrgInfo + \"/\" + orgId);\r\n      this.doLoading = false;\r\n      if (status) {\r\n        this.basicForm = data.orgInfo;\r\n        this.basicForm.typeDetailId = this.basicForm.typeDetailId.split(\",\");\r\n        this.basicForm.enterpriseFlag = this.basicForm.enterpriseFlag ? \"是\" : \"否\";\r\n        this.customOptions = this.basicForm.extInfoVO ? this.basicForm.extInfoVO : [];\r\n        // this.orgAccess = data.orgAccess ? data.orgAccess : []; // 避免报错\r\n        // this.orgAccess.forEach((item: any) => {\r\n        //   this.setDisabled(item.treeData);\r\n        //   // 禁用已经配置的选项\r\n        //   this.baseTypeList.some((temp: any) => {\r\n        //     if (temp.id == item.typeId) {\r\n        //       temp.disabled = true;\r\n        //       return true;\r\n        //     }\r\n        //   });\r\n        //   item.access = item.access != null ? item.access.split(\",\") : [];\r\n        // });\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } catch (e) {\r\n      this.doLoading = false;\r\n      return this.$message.error(\"请求失败，请重试！\");\r\n    }\r\n  }\r\n\r\n  // 设置disabled属性\r\n  setDisabled(arr: Array<any>) {\r\n    for (let i in arr) {\r\n      arr[i].disabled = true;\r\n      if (arr[i].children && arr[i].children.length) {\r\n        this.setDisabled(arr[i].children);\r\n      }\r\n    }\r\n  }\r\n\r\n  //获取基础属性类型列表\r\n  getBaseTypeList() {\r\n    this.$http.get(Url.getBaseTypeList).then((res: any) => {\r\n      if (res.data.status) {\r\n        this.baseTypeList = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  //树节点点击事件\r\n  orgNodeClick(data: any) {\r\n    this.getOrgInfo(data.id); //获取选中的组织信息，填充到表单\r\n  }\r\n\r\n  //点击编辑组织机构信息\r\n  editOrg(opt: any, data: any) {\r\n    this.type = opt;\r\n    switch (opt) {\r\n      case \"addTop\":\r\n        this.parentId = null;\r\n        this.currentId = null;\r\n        break;\r\n      case \"add\":\r\n        this.currentId = null;\r\n        this.parentId = data.id;\r\n        break;\r\n      case \"edit\":\r\n        this.currentId = data.id;\r\n        break;\r\n    }\r\n    this.visibleDialog = false;\r\n  }\r\n\r\n  //删除组织机构\r\n  remove(id: string) {\r\n    this.$confirm(\"确认删除?\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\"\r\n    }).then(() => {\r\n      this.$http.get(Url.delete + \"/\" + id).then((res: any) => {\r\n        if (res.data.status) {\r\n          this.$message.success(res.data.message);\r\n          this.basicForm = {\r\n            id: \"\",\r\n            name: \"\"\r\n          };\r\n          this.getTreeData();\r\n        } else {\r\n          this.$message({\r\n            showClose: true,\r\n            message: res.data.message,\r\n            type: \"error\"\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  closeDialog() {\r\n    this.visibleDialog = true;\r\n    this.customOptions = [];\r\n    this.getTreeData();\r\n  }\r\n\r\n  created() {\r\n    // this.getBaseTypeList();\r\n    this.getTreeData();\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Organization.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Organization.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Organization.vue?vue&type=template&id=aa45e852&scoped=true&\"\nimport script from \"./Organization.vue?vue&type=script&lang=ts&\"\nexport * from \"./Organization.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Organization.vue?vue&type=style&index=0&id=aa45e852&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa45e852\",\n  null\n  \n)\n\nexport default component.exports","const api = {\r\n  getBaseTypeList: \"/admin/baseType/list\",\r\n  getTypeDetail: \"/admin/typeDetail\", //六种类型树基础接口\r\n  findTypeTree: \"/admin/typeDetail/findTypeTree\", //获取类型树\r\n  getTemplateByTypeDetaiId: \"/admin/typeDetail/getTemplateByTypeDetaiId\", //获取自定义属性信息\r\n\r\n  getTreeData: \"/admin/typeDetail/findTypeTree/organization\", //组织机构类型树\r\n  getAttrList: \"/admin/typeDetail/attr/pagingAttr/organization\", //获取自定义属性列表\r\n  getTypeAndAttrs: \"/admin/typeDetail/attr/transferData/organization\", //获取组织机构类型及自定义属性\r\n  saveOrUpdateTypeAndAttrs: \"/admin/typeDetail/saveOrUpdateTypeAndAttrs/organization\", //保存组织机构类型和自定义属性\r\n  saveCustomAttrItems: \"/admin/typeDetail/saveCustomAttrItems\", //保存选项配置\r\n  deleteType: \"/admin/typeDetail/delete\",\r\n  //组织机构信息\r\n  getOrgTreeData: \"/admin/organization/orgTree\", //组织机构树\r\n  getOrgInfo: \"/admin/organization/getOrgDetailById\", //组织机构信息\r\n  addOrgBaseInfo: \"/admin/organization/add\", //保存组织机构基础信息\r\n  updateOrgBaseInfo: \"/admin/organization/update\", //保存组织机构基础信息\r\n  saveOrgAccess: \"/admin/organization/saveOrgAccess\", //保存数据权限\r\n  delete: \"/admin/organization/delete\", // 删除组织机构\r\n\r\n  //excel导入\r\n  download: \"/api/excel/download/orgTemplate\",\r\n  upload: \"/api/excel/upload/orgTemplate\"\r\n};\r\nexport default api;\r\n","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrg.vue?vue&type=style&index=0&id=d926e95c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrg.vue?vue&type=style&index=0&id=d926e95c&lang=scss&scoped=true&\""],"sourceRoot":""}