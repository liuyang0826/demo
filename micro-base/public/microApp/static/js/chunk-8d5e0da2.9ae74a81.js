(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-8d5e0da2"],{"17c1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.toDoMainPage?a("div",{staticStyle:{width:"100%"}},["needDeal"===e.selectedTab?a("div",{key:0,staticClass:"search-box"},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"流程关键字查询",clearable:""},on:{clear:e.getTasksData},model:{value:e.queryCriteriaDealing.procdefName,callback:function(t){e.$set(e.queryCriteriaDealing,"procdefName",t)},expression:"queryCriteriaDealing.procdefName"}}),a("q-search-button",{staticStyle:{"margin-left":"10px"},on:{click:e.getTasksData}})],1):"processed-unclose"===e.selectedTab?a("div",{key:1,staticClass:"search-box"},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"流程关键字查询",clearable:""},on:{clear:e.getAllProcessed},model:{value:e.queryCriteriaProcessed.processName,callback:function(t){e.$set(e.queryCriteriaProcessed,"processName",t)},expression:"queryCriteriaProcessed.processName"}}),a("q-search-button",{staticStyle:{"margin-left":"10px"},on:{click:e.getAllProcessed}},[e._v("查询")])],1):"processed-closed"===e.selectedTab?a("div",{key:2,staticClass:"search-box"},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"流程关键字查询",clearable:""},on:{clear:e.getAllProcessedClosed},model:{value:e.queryCriteriaClosed.processName,callback:function(t){e.$set(e.queryCriteriaClosed,"processName",t)},expression:"queryCriteriaClosed.processName"}}),a("q-search-button",{staticStyle:{"margin-left":"10px"},on:{click:e.getAllProcessedClosed}})],1):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content-box"},[a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("el-tab-pane",{attrs:{label:"待办（"+e.needDealTableTotal+"）",name:"needDeal"}},[a("el-table",{ref:"needDealTable",staticStyle:{"text-align":"center","margin-top":"20px","min-height":"calc(100vh - 355px)"},attrs:{data:e.needDealTableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",index:e.indexCustomNeedDeal,width:"100"}}),a("el-table-column",{attrs:{prop:"processName",label:"流程名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"发起时间",formatter:function(t){return e.$moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startUserName",label:"发起人","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"text",title:"办理任务"},on:{click:function(a){return e.dealProcess(t.row)}}},[e._v("\n                  办理任务\n                ")]),a("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text",title:"查看当前节点"},on:{click:function(a){return e.getCurrentNode(t.row.processInstanceId)}}},[e._v("\n                  查看当前节点\n                ")])]}}],null,!1,325300401)})],1),a("div",{staticClass:"pagination"},[a("q-pagination",{attrs:{"current-page":e.queryCriteriaDealing.current,"page-size":e.queryCriteriaDealing.pageSize,total:e.needDealTableTotal},on:{"current-change":function(t){return e.getTasksData(t)},"size-change":function(t){return e.pageSizeChange(t,0)},"update:currentPage":function(t){return e.$set(e.queryCriteriaDealing,"current",t)},"update:current-page":function(t){return e.$set(e.queryCriteriaDealing,"current",t)}}})],1)],1),a("el-tab-pane",{attrs:{label:"已办未结束（"+e.ProcessedTableTotal+"）",name:"processed-unclose"}},[a("el-table",{ref:"ProcessedTable",staticStyle:{"text-align":"center","margin-top":"20px","min-height":"calc(100vh - 355px)"},attrs:{data:e.ProcessedTableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",index:e.indexCustomProcessed,width:"100"}}),a("el-table-column",{attrs:{prop:"processName",label:"流程名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startTime",label:"发起时间",formatter:function(t){return e.$moment(t.startTime).format("YYYY-MM-DD HH:mm:ss")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startName",label:"发起人","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text",title:"查看详情"},on:{click:function(a){return e.getProcessDetailInfo(t.row)}}},[e._v("\n                  查看详情\n                ")]),a("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text",title:"查看当前节点"},on:{click:function(a){return e.getCurrentNode(t.row.processInstanceId)}}},[e._v("\n                  查看当前节点\n                ")])]}}],null,!1,2518095912)})],1),a("div",{staticClass:"pagination"},[a("q-pagination",{attrs:{"current-page":e.queryCriteriaProcessed.current,"page-size":e.queryCriteriaProcessed.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.ProcessedTableTotal},on:{"current-change":function(t){return e.getAllProcessed(t)},"size-change":function(t){return e.pageSizeChange(t,1)},"update:currentPage":function(t){return e.$set(e.queryCriteriaProcessed,"current",t)},"update:current-page":function(t){return e.$set(e.queryCriteriaProcessed,"current",t)}}})],1)],1),a("el-tab-pane",{attrs:{label:"已办已结束（"+e.closedTableTotal+"）",name:"processed-closed"}},[a("el-table",{ref:"ProcessedTable",staticStyle:{"text-align":"center","margin-top":"20px","min-height":"calc(100vh - 355px)"},attrs:{data:e.closedTableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",index:e.indexCustomClosed,width:"100"}}),a("el-table-column",{attrs:{prop:"processName",label:"流程名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startTime",label:"发起时间",formatter:function(t){return e.$moment(t.startTime).format("YYYY-MM-DD HH:mm:ss")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startName",label:"发起人","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text",title:"查看详情"},on:{click:function(a){return e.getProcessDetailInfo(t.row)}}},[e._v("\n                  查看详情\n                ")])]}}],null,!1,445893703)})],1),a("div",{staticClass:"pagination"},[a("q-pagination",{attrs:{"current-page":e.queryCriteriaClosed.current,"page-size":e.queryCriteriaClosed.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.closedTableTotal},on:{"current-change":function(t){return e.getAllProcessedClosed(t)},"size-change":function(t){return e.pageSizeChange(t,2)},"update:currentPage":function(t){return e.$set(e.queryCriteriaClosed,"current",t)},"update:current-page":function(t){return e.$set(e.queryCriteriaClosed,"current",t)}}})],1)],1)],1)],1),a("el-dialog",{staticStyle:{overflow:"auto"},attrs:{title:"当前节点",width:"50%","show-close":"",visible:e.currentNodeDialog,"destroy-on-close":!0},on:{"update:visible":function(t){e.currentNodeDialog=t}}},[e.currentNodeDialog?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"current-node-img"},[a("img",{ref:"processImg",attrs:{"process-src":e.currentNodeImg,alt:""}})]):e._e()])],1):e._e(),a("div",{staticStyle:{width:"100%"}},[e.toDoMainPage?e._e():a("deal-process-details",{attrs:{"edit-mode":e.edit,process:e.processItem},on:{clickReturn:e.returnAndReload}})],1)])},s=[],n=(a("96cf"),a("3b8d")),o=a("d225"),i=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),m=a("60a3"),p=a("7151"),g=a("3251"),b=a("c195"),h=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.queryCriteriaDealing={pageSize:10,current:1,procdefName:""},e.queryCriteriaProcessed={pageSize:10,current:1,processName:""},e.queryCriteriaClosed={pageSize:10,current:1,processName:""},e.procdefName="",e.needDealTableData=[],e.indexCustomNeedDeal=0,e.ProcessedTableData=[],e.indexCustomProcessed=0,e.closedTableData=[],e.indexCustomClosed=0,e.needDealTableTotal=0,e.ProcessedTableTotal=0,e.closedTableTotal=0,e.loading=!1,e.typeOptions=[],e.selectedTab="needDeal",e.currentNodeDialog=!1,e.currentNodeImg="",e.imgLoading=!1,e.toDoMainPage=!0,e.processItem=null,e.edit=!0,e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"created",value:function(){this.getTasksData(1),this.getAllProcessed(1),this.getAllProcessedClosed(1)}},{key:"getTasksData",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&(this.queryCriteriaDealing.current=t),this.loading=!0,this.$http.get(g["a"].getUserTasks,{params:this.queryCriteriaDealing}).then((function(e){a.loading=!1,e.data.status?(a.needDealTableData=e.data.data.records,a.needDealTableTotal=e.data.data.total,a.indexCustomNeedDeal=(e.data.data.current-1)*e.data.data.size+1):a.$message.error(e.data.message)})).catch((function(){a.loading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllProcessed",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.queryCriteriaProcessed.current=t),e.prev=1,e.next=4,this.$http.get(g["a"].getProcessInstance,{params:this.queryCriteriaProcessed});case 4:a=e.sent,r=a.data,s=r.data,n=r.status,o=r.message,n?(this.ProcessedTableData=s.records,this.ProcessedTableTotal=s.total,this.indexCustomProcessed=(s.current-1)*s.size+1):this.$message.error(o),e.next=15;break;case 12:return e.prev=12,e.t0=e["catch"](1),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllProcessedClosed",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.queryCriteriaClosed.current=t),e.prev=1,e.next=4,this.$http.get(g["a"].getAllClosedProcess,{params:this.queryCriteriaClosed});case 4:a=e.sent,r=a.data,s=r.data,n=r.status,o=r.message,n?(this.closedTableData=s.records,this.closedTableTotal=s.total,this.indexCustomClosed=(s.current-1)*s.size+1):this.$message.error(o),e.next=15;break;case 12:return e.prev=12,e.t0=e["catch"](1),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCurrentNode",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentNodeDialog=!0,this.imgLoading=!0,this.currentNodeImg="".concat(g["a"].getProcessImg,"?processInstanceId=").concat(t),this.getImage();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getImage",value:function(){var e=this;this.$nextTick((function(){var t=e.$refs["processImg"],a=t.getAttribute("process-src"),r=new XMLHttpRequest,s=b["a"].get("accessToken");r.responseType="blob",r.open("get",a,!0),r.setRequestHeader("accessToken","Bearer "+s),r.onreadystatechange=function(a){r.readyState==XMLHttpRequest.DONE&&200==r.status&&(t.src=URL.createObjectURL(r.response),t.onload=function(){URL.revokeObjectURL(t.src)}),e.imgLoading=!1},r.send(null)}))}},{key:"dealProcess",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),this.edit=!0,this.processItem=t,this.toDoMainPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProcessDetailInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("查看详情"),console.log(t),this.processItem=t,this.toDoMainPage=!1,this.edit=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pageSizeChange",value:function(e,t){0===t&&(this.queryCriteriaDealing.pageSize=e,this.getTasksData(1)),1===t&&(this.queryCriteriaProcessed.pageSize=e,this.getAllProcessed(1)),2===t&&(this.queryCriteriaClosed.pageSize=e,this.getAllProcessedClosed(1))}},{key:"searchWithTab",value:function(){switch(this.selectedTab){case"needDeal":this.getTasksData(1);break;case"processed-unclose":this.getAllProcessed(1);break;case"processed-closed":this.getAllProcessedClosed(1);break;default:this.getTasksData(1)}}},{key:"returnAndReload",value:function(){this.toDoMainPage=!0,this.getTasksData(1),this.getAllProcessed(1),this.getAllProcessedClosed(1)}}]),t}(m["e"]);h=d["__decorate"]([Object(m["a"])({components:{DealProcessDetails:p["a"]}})],h);var f=h,v=f,y=(a("3baf"),a("2877")),k=Object(y["a"])(v,r,s,!1,null,"53f7a114",null);t["default"]=k.exports},3251:function(e,t,a){"use strict";var r={getUserTasks:"/admin/processInstance/getUserTasks",getProcessParameter:"/admin/processInstance/getProcessParameter",handleTask:"/admin/processInstance/handleTask",getProcessImg:"/admin/processInstance/getProcessImg",getProcessDetailInfo:"/admin/processhistory/getHisProcComment/",getApplyFormValue:"/admin/processhistory/getSumbitValue/",getOngoingProcess:"/admin/processhistory/getMyUnFinishedProcess",getFinishedProcess:"/admin/processhistory/getMyFinishedProcess",getEventType:"/api/eventType/getEventType",getAllProcessType:"/admin/processType/procdeftype/findAll",processAssignState:"/admin/processDesigner/public/process/processAssignState",getAllProcessList:"/admin/processDesigner/public/visible/getAllProcessByUserVisible",getFormDefine:"/admin/formdesigner/getFormDefine",getAllUserVisible:"/admin/processDesigner/public/visible/getAllUser",getAssignTaskList:"/admin/processDesigner/public/process/getAssignTaskList",getAllOrg:"/admin/processDesigner/public/visible/getAllOrg",getAllRole:"/admin/processDesigner/public/visible/getAllRole",getAllUser:"/admin/processDesigner/public/visible/getAllUser",getFormList:"/admin/formdesigner/getFormList",saveSubmitForm:"/admin/processInstance/saveSubmitForm",getProcessInstance:"/admin/processInstance/getProcessInstance",getAllClosedProcess:"/admin/processhistory/getCompleteProcess",getRuntimeTaskAssignedList:"/admin/processInstance/getRuntimeTaskAssignedList",updateAssignedGroup:"/admin/processInstance/updateAssignedGroup"};t["a"]=r},"3baf":function(e,t,a){"use strict";var r=a("e4c6"),s=a.n(r);s.a},5110:function(e,t,a){},7151:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticClass:"deal-page-main"},[a("el-tabs",{staticStyle:{position:"relative"},attrs:{type:"card"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e.editMode?a("el-tab-pane",{key:"current",attrs:{label:e.process.taskName,name:"currentTabPane"}},[a("el-form",{ref:"submitNodeForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.submitNodeForm,"label-width":"120px",size:"small"}},[e.process.formContent?a("el-row",[a("div",{staticClass:"form-name"},[e._v("审批表单")])]):e._e(),a("q-custom-input",{ref:"customInput",attrs:{"custom-options":e.currentNodeForm}}),a("div",{staticClass:"deal-process-result"},[a("el-form-item",{attrs:{label:"处理任务：",prop:"handle",rules:{required:!0,message:"该选项为必填项",trigger:"blur"}}},[e.process.isFirst?[a("el-radio",{attrs:{label:"pass"},model:{value:e.submitNodeForm.handle,callback:function(t){e.$set(e.submitNodeForm,"handle",t)},expression:"submitNodeForm.handle"}},[e._v("重新发起")])]:[a("el-radio",{attrs:{label:"pass"},model:{value:e.submitNodeForm.handle,callback:function(t){e.$set(e.submitNodeForm,"handle",t)},expression:"submitNodeForm.handle"}},[e._v("通过 ")]),e.handleState||2!==e.process.nextTaskCount?e._e():a("el-radio",{attrs:{label:"reject"},model:{value:e.submitNodeForm.handle,callback:function(t){e.$set(e.submitNodeForm,"handle",t)},expression:"submitNodeForm.handle"}},[e._v("驳回")])]],2),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2,resize:"none"},model:{value:e.submitNodeForm.taskRemark,callback:function(t){e.$set(e.submitNodeForm,"taskRemark",t)},expression:"submitNodeForm.taskRemark"}})],1),e._e()],1)],1)],1):e._e(),e._l(e.processDefines,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:t.taskName?t.taskName:"发起",name:t.taskKey?t.taskKey+"-"+r:"startUserName"}},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{size:"small","label-width":"120px"}},[a("div",{staticClass:"form-name"},[e._v(e._s(t.taskName?"审批表单":"申请表单"))]),t.taskKey?[t.formValue&&"null"!==t.formValue?[a("q-custom-input",{attrs:{"custom-options":JSON.parse(t.formValue),disabled:""}})]:e._e(),a("el-row",{staticClass:"partition-line"},[a("el-form-item",{staticStyle:{width:"33.3%"},attrs:{label:"处理结果："}},[a("el-input",{attrs:{size:"small",disabled:"",model:t.comment.type,placeholder:"pass"===t.comment.type?"通过":"驳回"}})],1),a("el-form-item",{attrs:{label:"审批时间："}},[a("el-input",{attrs:{placeholder:e.$moment(t.comment.time).format("YYYY-MM-DD HH:mm:ss"),disabled:""}})],1),a("el-form-item",{attrs:{label:"审批人："}},[a("el-input",{attrs:{placeholder:t.comment.userId,disabled:""}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2,resize:"none",disabled:""},model:{value:t.comment.message,callback:function(a){e.$set(t.comment,"message",a)},expression:"item.comment.message"}})],1)],1)]:[a("q-custom-input",{attrs:{"custom-options":e.startNodeForm,disabled:""}}),a("el-row",{staticClass:"partition-line"},[a("el-form-item",{attrs:{label:"申请时间："}},[a("el-input",{attrs:{disabled:""},model:{value:e.startNodeTime,callback:function(t){e.startNodeTime=t},expression:"startNodeTime"}})],1),a("el-form-item",{attrs:{label:"申请人："}},[a("el-input",{attrs:{disabled:""},model:{value:t.comment.userId,callback:function(a){e.$set(t.comment,"userId",a)},expression:"item.comment.userId"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:2,resize:"none",disabled:""},model:{value:t.comment.message,callback:function(a){e.$set(t.comment,"message",a)},expression:"item.comment.message"}})],1)],1)]],2)],1)}))],2),a("div",{staticClass:"return-back-button"},["currentTabPane"===e.currentTab?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dealedProcess}},[e._v("\n      提交\n    ")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.returnMainPage}},[e._v("返回")])],1)],1)},s=[],n=(a("96cf"),a("3b8d")),o=a("d225"),i=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),m=a("60a3"),p=a("3251"),g=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.detailLoading=!0,e.currentTab=e.editMode?"currentTabPane":"startUserName",e.processDefines=[],e.startNodeForm=[],e.startNodeTime="",e.startUserName="",e.targetUserIds=[],e.currentNodeForm=[],e.submitNodeForm={taskRemark:" ",formValue:"",targetUserIds:[],handle:"pass"},e.handleState=0,e.userInfoList=[],e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"created",value:function(){var e=this;this.editMode?(this.dealProcess().then((function(){return e.detailLoading=!1})),this.submitNodeForm.taskId=this.process.taskId):(this.getProcessHistory(),this.getApplyFormValue().then((function(){return e.detailLoading=!1})))}},{key:"dealProcess",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get(p["a"].getProcessParameter,{params:{processInstanceId:this.process.processInstanceId,taskId:this.process.taskId}});case 3:t=e.sent,a=t.data,r=a.data,s=a.status,n=a.message,s?(this.processDefines=r.comments,this.startNodeForm=JSON.parse(r.formSubmit.formSubmitValue).map((function(e){return e.attrType?e:{name:e.title,attrType:"text",value:e.value,dataRange:{presetText:""}}})),this.startNodeTime=this.$moment(r.formSubmit.createTime).format("YYYY-MM-DD HH:mm:ss"),this.process.isFirst?this.currentNodeForm=JSON.parse(JSON.stringify(this.startNodeForm)):this.currentNodeForm=this.process.formContent?JSON.parse(this.process.formContent):[]):this.$message.error(n),e.next=14;break;case 11:return e.prev=11,e.t0=e["catch"](0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"findUserByName",value:function(e){var t=this;this.$http.get(p["a"].getAllUserVisible,{params:{userName:e}}).then((function(e){e.data.status?t.userInfoList=e.data.data:t.$message.error(e.data.message)}))}},{key:"dealedProcess",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["submitNodeForm"].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return e.next=3,t.$refs.customInput.formValidation();case 3:if(r=e.sent,!r){e.next=9;break}t.submitNodeForm.formValue=JSON.stringify(t.currentNodeForm),t.$http.post(p["a"].handleTask,t.submitNodeForm).then((function(e){e.data.status?(t.$message.success("流程处理成功！"),t.returnMainPage()):t.$message.error(e.data.message)})),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getProcessHistory",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("".concat(p["a"].getProcessDetailInfo).concat(this.process.processInstanceId)).then((function(e){t.processDefines=e.data}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApplyFormValue",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("".concat(p["a"].getApplyFormValue).concat(this.process.processInstanceId)).then((function(e){t.startNodeForm=JSON.parse(e.data.formSubmitValue).map((function(e){return e.attrType?e:{name:e.title,attrType:"text",value:e.value,dataRange:{presetText:""}}})),t.startNodeTime=t.$moment(e.data.createTime).format("YYYY-MM-DD HH:mm:ss"),t.startUserName=e.data.userName}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"returnMainPage",value:function(){this.$emit("clickReturn")}}]),t}(m["e"]);d["__decorate"]([Object(m["d"])({type:Object,default:function(){},required:!0})],g.prototype,"process",void 0),d["__decorate"]([Object(m["d"])({type:Boolean,default:!0})],g.prototype,"editMode",void 0),g=d["__decorate"]([Object(m["a"])({})],g);var b=g,h=b,f=(a("bbfe"),a("2877")),v=Object(f["a"])(h,r,s,!1,null,"2328e79a",null);t["a"]=v.exports},bbfe:function(e,t,a){"use strict";var r=a("5110"),s=a.n(r);s.a},e4c6:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8d5e0da2.9ae74a81.js.map