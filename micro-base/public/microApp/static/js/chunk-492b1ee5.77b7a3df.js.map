{"version":3,"sources":["webpack://micro_[name]/./src/microApps/inspection/api/index.ts","webpack://micro_[name]/./src/microApps/inspection/views/codeManage/CodeManageList.vue?c9f8","webpack://micro_[name]/./src/microApps/inspection/views/codeManage/CodeManageList.vue","webpack://micro_[name]/./src/microApps/inspection/views/codeManage/CodeManageList.vue?dd0a","webpack://micro_[name]/./src/microApps/inspection/views/codeManage/CodeManageList.vue?5f12","webpack://micro_[name]/./src/microApps/inspection/views/codeManage/CodeManageList.vue?b6ee"],"names":["api","getCodesListByCatalog","getInspectQRCodes","getSensorsListByPart","getSensorInfoById","getPartsList","getCodeById","updateCode","saveCode","deleteCode","addTemplateNode","previewCode","deleteTemplate","getPlansListByCatalog","getInspectPlans","catalog","add","update","delete","tree","typeTree","qrCode","listById","save","preview","detail","isBinded","template","list","listForOrg","personGroup","group","all","person","record","other","getAllUserList","getAllUser","getAllEventType","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","openNodeForm","ref","staticStyle","codesData","codesProp","handleNodeClick","scopedSlots","_u","key","fn","node","data","label","_v","_s","stopPropagation","removeTreeNode","codesName","addACode","directives","name","rawName","value","expression","codesListData","scope","previewQRCode","row","handleCodeView","handleCodeEdit","handleCodeDelete","codePreview","codeImgSrc","addNodeFormVisible","model","callback","$$v","nodeForm","$set","_e","slot","saveNode","staticRenderFns","children","loading","singleCodeVisible","catalogInfo","codeMode","item","$http","post","id","then","res","status","catalogName","$message","error","message","codeId","mode","catalogId","get","success","$router","push","params","preData","JSON","stringify","start","getInspectQRCodesList","catalogType","parentId","parentName","ndoe","component"],"mappings":"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","file":"static/js/chunk-492b1ee5.77b7a3df.js","sourcesContent":["const api = {\r\n  getCodesListByCatalog: \"/admin/code/info/list/catalog/\",\r\n  getInspectQRCodes: \"/admin/catalog/tree\",\r\n  getSensorsListByPart: \"/api/partsSensorRelation/getSensorIds\", // 根据设备id查询已绑定的传感器列表\r\n  getSensorInfoById: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  getPartsList: \"/admin/parts/getList\",\r\n  // todo 修改成正确的接口\r\n  getCodeById: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  updateCode: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  saveCode: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  deleteCode: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  addTemplateNode: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  previewCode: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  deleteTemplate: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  getPlansListByCatalog: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  getInspectPlans: \"/api/sensor/getSensorById\", // 根据id查询传感器详细信息\r\n  // todo 有些文件里面用的 const Url: any = {}; 临时解决报错问题 记得改一下\r\n\r\n  // 目录\r\n  catalog: {\r\n    add: \"/admin/catalog/add\",\r\n    update: \"/admin/catalog/update\",\r\n    delete: \"/admin/catalog/delete/\", // `${id}`\r\n    tree: \"/admin/catalog/tree\",\r\n    typeTree: \"/admin/catalog/tree/\" // `${type}` 巡检二维码类型：INSPECT_QR_CODE; 巡检方案类型：INSPECT_PlAN_CODE\r\n  },\r\n  // 二维码\r\n  qrCode: {\r\n    listById: \"/admin/code/info/list/catalog/\", // `${catalogId}`\r\n    save: \"/admin/code/info/save\",\r\n    update: \"/admin/code/info/update\",\r\n    delete: \"/admin/code/info/delete/\", // `${codeId}`\r\n    preview: \"/admin/code/info/preview/\", // `${codeId}`\r\n    detail: \"/admin/code/info/detail/\", // `${codeId}`\r\n    isBinded: \"/admin/code/info/verify/device/\" // `${codeId}`\r\n  },\r\n  // 方案\r\n  template: {\r\n    list: \"/admin/inspect/template/list/catalog/\", // `${catalogId}`\r\n    listForOrg: \"/admin/inspect/template/getInspectTemplateByOrgId\",\r\n    detail: \"/admin/inspect/template/get/\", // `${templateId}`\r\n    save: \"/admin/inspect/template/saveTemplate\",\r\n    delete: \"/admin/inspect/template/\" // `${templateId}`\r\n  },\r\n  // 人员组\r\n  personGroup: {\r\n    // 组\r\n    group: {\r\n      add: \"/admin/person/group/add\",\r\n      all: \"/admin/person/group/all\", // 获取所有小组名\r\n      list: \"/admin/person/group/list\", // 获取所有小组名及组内人员\r\n      delete: \"/admin/person/group/delete/\", // `${groupId}`\r\n      update: \"/admin/person/group/update\"\r\n    },\r\n    // 人\r\n    person: {\r\n      list: \"/admin/inspect/person/list/\", // `{groupId}` 小组id\r\n      add: \"/admin/inspect/person/add\", // 添加人员\r\n      update: \"/admin/inspect/person/put\",\r\n      delete: \"/admin/inspect/person/delete/\" // `${groupId}/${personIds}`\r\n    }\r\n  },\r\n  // 巡检结果\r\n  record: {\r\n    list: \"/admin/inspect/record/pagination\", // by deviceId\r\n    save: \"/admin/inspect/record/save\" // create new record\r\n  },\r\n  other: {\r\n    getAllUserList: \"/admin/getUserList\",\r\n    getAllUser: \"/admin/processDesigner/public/visible/getAllUser\",\r\n    getAllEventType: \"/admin/event/type/tree\"\r\n  }\r\n};\r\n\r\nexport default api;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('q-card',{staticClass:\"sub_menu\",attrs:{\"title\":\"二维码目录\",\"btn-tip\":\"添加一级节点\"},on:{\"click\":function($event){return _vm.openNodeForm('add')}}},[_c('div',{staticClass:\"tree-body\"},[_c('el-tree',{ref:\"codesTree\",staticStyle:{\"margin-top\":\"16px\"},attrs:{\"default-expand-all\":\"\",\"data\":_vm.codesData,\"node-key\":\"id\",\"props\":_vm.codesProp},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('div',{staticClass:\"operation-buttons\"},[_c('span',{attrs:{\"title\":node.label}},[_vm._v(_vm._s(node.label))]),_c('div',[_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.openNodeForm('add', data)}}}),_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.openNodeForm('edit', data)}}}),_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.removeTreeNode(node, data)}}})],1)])}}])})],1)]),_c('q-card',{staticClass:\"sub_main\"},[_c('div',{staticClass:\"header\"},[_c('div',[_vm._v(_vm._s(_vm.codesName))]),_c('div',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-paperclip\"}},[_vm._v(\"方案绑定\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-download\"}},[_vm._v(\"二维码下载\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.addACode()}}},[_vm._v(\"单个建码\")])],1)]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin-top\":\"20px\"}},[_c('el-table',{ref:\"codesListTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.codesListData}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"45\"}}),_c('el-table-column',{attrs:{\"prop\":\"codeName\",\"label\":\"二维码名称\",\"align\":\"center\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"templateName\",\"label\":\"方案名称\",\"align\":\"center\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"deviceName\",\"label\":\"关联设备\",\"align\":\"center\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"prop\":\"location\",\"label\":\"地址\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"text\",\"icon\":\"el-icon-picture\"},on:{\"click\":function($event){return _vm.previewQRCode(scope.row)}}}),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"text\",\"icon\":\"el-icon-view\"},on:{\"click\":function($event){return _vm.handleCodeView(scope.row)}}}),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.handleCodeEdit(scope.row)}}}),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleCodeDelete(scope.row)}}})]}}])})],1)],1)]),_c('el-dialog',{attrs:{\"title\":\"二维码图片预览\",\"visible\":_vm.codePreview,\"width\":\"340px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.codePreview=$event}}},[_c('img',{staticStyle:{\"margin\":\"auto\"},attrs:{\"src\":_vm.codeImgSrc}})]),_c('el-dialog',{attrs:{\"title\":\"添加目录节点\",\"visible\":_vm.addNodeFormVisible,\"width\":\"440px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addNodeFormVisible=$event}}},[_c('el-form',{attrs:{\"label-width\":\"120px\"},model:{value:(_vm.nodeForm),callback:function ($$v) {_vm.nodeForm=$$v},expression:\"nodeForm\"}},[(_vm.nodeForm.parentName)?_c('el-form-item',{attrs:{\"label\":\"上级目录：\",\"prop\":\"parentName\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":true},model:{value:(_vm.nodeForm.parentName),callback:function ($$v) {_vm.$set(_vm.nodeForm, \"parentName\", $$v)},expression:\"nodeForm.parentName\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"目录名称：\",\"prop\":\"catalogName\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.nodeForm.catalogName),callback:function ($$v) {_vm.$set(_vm.nodeForm, \"catalogName\", $$v)},expression:\"nodeForm.catalogName\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.addNodeFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.saveNode}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport api from \"@/microApps/inspection/api\";\r\n\r\n@Component({})\r\nexport default class CodeManageList extends Vue {\r\n  codesName: String = \"\";\r\n  codesData: Array<Object> = [];\r\n  codesProp: Object = {\r\n    children: \"children\",\r\n    label: \"catalogName\"\r\n  };\r\n  codesListData: Array<Object> = [];\r\n  loading: Boolean = false;\r\n  codePreview: Boolean = false;\r\n  singleCodeVisible: Boolean = false;\r\n  codeImgSrc: String = \"\";\r\n  catalogInfo: any = {};\r\n  codeMode: any = {};\r\n\r\n  addNodeFormVisible: boolean = false;\r\n  nodeForm: any = {};\r\n\r\n  handleNodeClick(item: any) {\r\n    this.loading = true;\r\n    this.catalogInfo = item;\r\n    this.$http.post(api.getCodesListByCatalog + item.id).then((res: any) => {\r\n      if (res.data.status) {\r\n        this.codesListData = res.data.data;\r\n        this.codesName = item.catalogName;\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n      this.loading = false;\r\n    });\r\n  }\r\n  previewQRCode(item: any) {\r\n    this.codePreview = true;\r\n    this.codeImgSrc = api.previewCode + item.id;\r\n  }\r\n  handleCodeView(item: any) {\r\n    this.codeMode.codeId = item.id;\r\n    this.codeMode.mode = \"view\";\r\n    this.codeMode.catalogId = this.catalogInfo.id;\r\n    this.singleCodeVisible = true;\r\n  }\r\n  handleCodeEdit(item: any) {\r\n    this.codeMode.codeId = item.id;\r\n    this.codeMode.mode = \"edit\";\r\n    this.codeMode.catalogId = this.catalogInfo.id;\r\n    this.singleCodeVisible = true;\r\n  }\r\n  handleCodeDelete(item: any) {\r\n    this.$http.get(api.deleteCode + item.id).then((res: any) => {\r\n      if (res.data.status) {\r\n        this.$message.success(\"删除成功！\");\r\n        this.handleNodeClick(this.catalogInfo);\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n  addACode() {\r\n    this.$router.push({\r\n      name: \"codeManageDetail\",\r\n      params: {\r\n        preData: JSON.stringify({\r\n          codeId: 0,\r\n          mode: \"add\",\r\n          catalogId: this.catalogInfo.id\r\n        })\r\n      }\r\n    });\r\n  }\r\n  getInspectQRCodesList() {\r\n    const start = this;\r\n    this.$http.get(api.getInspectQRCodes).then((res: any) => {\r\n      if (res.data.status) {\r\n        start.codesData = res.data.data.children;\r\n        start.handleNodeClick(this.codesData[0]);\r\n      } else {\r\n        start.$message.error(res.data.message);\r\n      }\r\n    });\r\n  }\r\n  changeSingleCodeFormVisible() {\r\n    this.getInspectQRCodesList();\r\n    this.singleCodeVisible = false;\r\n  }\r\n\r\n  mounted() {\r\n    this.getInspectQRCodesList();\r\n  }\r\n\r\n  openNodeForm(mode: string = \"add\", data: any = null) {\r\n    this.addNodeFormVisible = true;\r\n    if (data) {\r\n      this.nodeForm = data;\r\n    } else {\r\n      this.nodeForm = {\r\n        catalogType: \"INSPECT_PlAN_CODE\",\r\n        parentId: null,\r\n        parentName: null\r\n      };\r\n    }\r\n  }\r\n  removeTreeNode(ndoe: any, data: any) {}\r\n  // 保存目录节点\r\n  saveNode() {\r\n    this.$http.post(api.addTemplateNode, this.nodeForm);\r\n    // try {\r\n    //   let {\r\n    //     data: { data, status, message }\r\n    //   } = await Http.post(Url.inspect.addTemplateNode, this.nodeForm);\r\n    //   if (status) {\r\n    //     this.$message.success(\"添加成功!\");\r\n    //   } else {\r\n    //     this.$message.error(message);\r\n    //   }\r\n    // } catch (e) {\r\n    //   return null;\r\n    // }\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeManageList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeManageList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeManageList.vue?vue&type=template&id=60787bf4&scoped=true&\"\nimport script from \"./CodeManageList.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeManageList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeManageList.vue?vue&type=style&index=0&id=60787bf4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60787bf4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeManageList.vue?vue&type=style&index=0&id=60787bf4&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeManageList.vue?vue&type=style&index=0&id=60787bf4&scoped=true&lang=scss&\""],"sourceRoot":""}