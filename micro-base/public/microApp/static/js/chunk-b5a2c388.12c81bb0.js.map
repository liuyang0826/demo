{"version":3,"sources":["webpack://micro_[name]/./src/microApps/codeRuleManage/views/codeRuleConfig/CodeRuleConfig.vue?f805","webpack://micro_[name]/./src/microApps/codeRuleManage/components/CodeRulesConfig.vue?5c31","webpack://micro_[name]/./src/utils/genCascader.ts","webpack://micro_[name]/./src/microApps/codeRuleManage/views/codeRuleConfig/CodeRuleConfig.vue?e8c4","webpack://micro_[name]/./src/microApps/codeRuleManage/views/codeRuleConfig/CodeRuleConfig.vue","webpack://micro_[name]/./src/microApps/codeRuleManage/views/codeRuleConfig/CodeRuleConfig.vue?34e1","webpack://micro_[name]/./src/microApps/codeRuleManage/views/codeRuleConfig/CodeRuleConfig.vue?0076","webpack://micro_[name]/./src/microApps/codeRuleManage/components/CodeRulesConfig.vue?ad45","webpack://micro_[name]/./src/utils/inputFormat.ts","webpack://micro_[name]/./src/microApps/codeRuleManage/components/CodeRulesConfig.vue","webpack://micro_[name]/./src/microApps/codeRuleManage/components/CodeRulesConfig.vue?b758","webpack://micro_[name]/./src/microApps/codeRuleManage/components/CodeRulesConfig.vue?4002","webpack://micro_[name]/./src/microApps/codeRuleManage/api/index.ts"],"names":["genCascader","data","forEach","item","children","length","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","rightTitle","on","$event","handleAddRule","slot","staticStyle","model","value","treeMessage","callback","$$v","$set","expression","ref","defaultProps","filterNode","handleNodeClick","scopedSlots","_u","key","fn","node","style","width","level","label","_v","_s","stopPropagation","handleEditRule","handleDeleteRule","directives","name","rawName","form","formRules","isEdit","trim","id","preRuleExpressJson","handleSaveRule","_e","staticRenderFns","filterText","codeName","required","trigger","message","code","loading","parentNode","baseTypeOptions","autoFind","getRuleTree","JSON","parse","stringify","val","$refs","tree","filter","indexOf","$http","get","api","status","$nextTick","setCurrentKey","$message","error","parent","parentId","parentName","clearValidate","validate","flag","codeRule","getResult","expressionResult","ruleExpress","info","saveRule","post","updateRuleTree","addRuleTree","remark","success","$confirm","confirmButtonText","cancelButtonText","type","then","doDeleteRule","deleteRuleTree","getBaseTypeList","disabled","components","CodeRulesConfig","component","headerVisible","selectConditions","preRuleExpress","nativeOn","handleFocusRuleInput","cursorIndex","class","focus","keyboardFocus","widgetFocus","target","currentTarget","_l","index","handleFocusWidgetInput","handleBlurWidgetInput","handleInputMaxLength","handleInputDateStr","handleInputFixed","hasIndex","handleSelectKey","valToNum","String","len","firstIsZero","firstIsMinus","hasPoint","currChar","test","substr","valToPositive","charAt","valToDecimal","accuracy","pointP","valToInt","areaOptions","concatOptions","indexTypeOptions","keyboardList","maxlength","selectVal","typeValue","sortValue","expressionJson","some","d","document","addEventListener","handleBlurRuleInput","handleKeydown","removeEventListener","e","reactKeydownEvent","toLocaleLowerCase","handleDeleteToken","handleMoveCursor","push","splice","pop","arrow","Promise","resolve","reject","i","map","join","Boolean","default","immediate","getOrgBindRuleList","bindRule","updateBindRule","unbindRule","getBindRuleDetail","getOrgTreeData","cloneRule"],"mappings":"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","file":"static/js/chunk-b5a2c388.12c81bb0.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRuleConfig.vue?vue&type=style&index=0&id=09463e87&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRuleConfig.vue?vue&type=style&index=0&id=09463e87&scoped=true&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRulesConfig.vue?vue&type=style&index=0&id=47bf3210&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRulesConfig.vue?vue&type=style&index=0&id=47bf3210&scoped=true&lang=scss&\"","function genCascader(data: any[]) {\r\n  data.forEach(item => {\r\n    if (!item.children || !item.children.length) {\r\n      delete item.children;\r\n    } else {\r\n      genCascader(item.children);\r\n    }\r\n  });\r\n}\r\n\r\nexport default genCascader;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('q-left-right-layout',{attrs:{\"left-title\":\"编码规则树\",\"btn-tip\":\"添加编码规则树\",\"right-title\":_vm.rightTitle},on:{\"click\":function($event){return _vm.handleAddRule(null)}}},[_c('div',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('el-input',{staticStyle:{\"margin-bottom\":\"10px\",\"padding\":\"0 10px\"},attrs:{\"placeholder\":\"输入关键字进行过滤\",\"maxlength\":100,\"size\":\"small\"},model:{value:(_vm.treeMessage.filterText),callback:function ($$v) {_vm.$set(_vm.treeMessage, \"filterText\", $$v)},expression:\"treeMessage.filterText\"}}),_c('div',{staticClass:\"tree-content\"},[_c('el-tree',{ref:\"tree\",staticClass:\"filter-tree\",attrs:{\"data\":_vm.treeMessage.data,\"props\":_vm.treeMessage.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"highlight-current\":\"\",\"expand-on-click-node\":false,\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"text-overflow\":\"ellipsis\",\"overflow\":\"hidden\",\"white-space\":\"nowrap\",\"word-break\":\"keep-all\"},style:({ width: 190 - (node.level - 1) * 18 + 'px' }),attrs:{\"title\":node.label}},[_vm._v(\"\\n              \"+_vm._s(node.label)+\"\\n            \")]),_c('span',[_c('el-button',{staticClass:\"el-icon-plus\",attrs:{\"type\":\"text\",\"size\":\"mini\",\"title\":\"添加子节点\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAddRule(data)}}}),_c('el-button',{staticClass:\"el-icon-edit\",attrs:{\"type\":\"text\",\"size\":\"mini\",\"title\":\"编辑节点\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEditRule(data)}}}),_c('el-button',{staticClass:\"el-icon-delete\",attrs:{\"type\":\"text\",\"size\":\"mini\",\"title\":\"删除节点\"},on:{\"click\":function($event){return _vm.handleDeleteRule(data)}}})],1)])}}])})],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[(_vm.form)?[_c('div',{staticClass:\"basic-attribute\"},[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"基础信息\")]),_c('div',{staticClass:\"basic-attribute-body\"},[_c('el-form',{ref:\"form\",attrs:{\"label-width\":\"100px\",\"size\":\"small\",\"model\":_vm.form,\"rules\":_vm.formRules,\"disabled\":!_vm.isEdit}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"规则名称：\",\"prop\":\"codeName\"}},[_c('el-input',{attrs:{\"maxlength\":50},model:{value:(_vm.form.codeName),callback:function ($$v) {_vm.$set(_vm.form, \"codeName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.codeName\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"父节点名称：\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.parentName),callback:function ($$v) {_vm.$set(_vm.form, \"parentName\", $$v)},expression:\"form.parentName\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"规则编码：\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"maxlength\":50,\"placeholder\":\"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.code\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"规则介绍：\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"maxlength\":200},model:{value:(_vm.form.remark),callback:function ($$v) {_vm.$set(_vm.form, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.remark\"}})],1)],1)],1)],1)],1)]),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"content-title\"},[_c('el-icon',{staticClass:\"el-icon-menu icon-blue\"}),_vm._v(\"\\n            编码规则\\n          \")],1),_c('code-rules-config',{key:_vm.form.id,ref:\"codeRule\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"expression-json\":_vm.form.preRuleExpressJson,\"disabled\":!_vm.isEdit}})],1),(_vm.isEdit)?_c('div',{staticClass:\"footer-btn\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleSaveRule}},[_vm._v(\"保存\")])],1):_vm._e()]:_vm._e()],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n * @Describe: Describe\r\n * @Author: liuyang\r\n * @Date: 2020-02-17 9:59\r\n */\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\nimport CodeRulesConfig from \"@/microApps/codeRuleManage/components/CodeRulesConfig.vue\";\r\nimport { ElForm } from \"element-ui/types/form\";\r\nimport api from \"@/microApps/codeRuleManage/api\";\r\nimport genCascader from \"@/utils/genCascader\";\r\n\r\n@Component({\r\n  components: {\r\n    CodeRulesConfig\r\n  }\r\n})\r\nexport default class CodeRuleConfig extends Vue {\r\n  // 类型树信息\r\n  treeMessage: any = {\r\n    // 过滤条件\r\n    filterText: \"\",\r\n    // tree数据\r\n    data: [],\r\n    // 配置选项\r\n    defaultProps: {\r\n      children: \"children\",\r\n      label: \"codeName\"\r\n    }\r\n  };\r\n  // 选中表单信息\r\n  isEdit: boolean = false;\r\n  form: any = {};\r\n  formRules: any = {\r\n    codeName: { required: true, trigger: \"blur\", message: \"请输入名称\" },\r\n    code: { required: true, trigger: \"blur\", message: \"请输入编码\" }\r\n  };\r\n  loading: boolean = false;\r\n  parentNode: any = null;\r\n  baseTypeOptions: any[] = [];\r\n  autoFind: boolean = true;\r\n\r\n  // 右侧标题\r\n  get rightTitle() {\r\n    if (this.isEdit) {\r\n      return this.form.id ? `编辑${this.form.codeName}` : \"添加编码规则\";\r\n    }\r\n    return `${this.form.codeName || \"\"}详情`;\r\n  }\r\n\r\n  created(): void {\r\n    this.getRuleTree();\r\n    // this.getBaseTypeList();\r\n  }\r\n\r\n  // 树节点点击事件\r\n  handleNodeClick(data: any) {\r\n    this.form = JSON.parse(JSON.stringify(data));\r\n    this.isEdit = false;\r\n  }\r\n\r\n  // 监听是否tree过滤条件\r\n  @Watch(\"treeMessage.filterText\")\r\n  setFilterText(val: any) {\r\n    (this.$refs.tree as any).filter(val);\r\n  }\r\n\r\n  // 过滤tree\r\n  filterNode(value: any, data: any) {\r\n    if (!value) return true;\r\n    return data[this.treeMessage.defaultProps.label].indexOf(value) !== -1;\r\n  }\r\n\r\n  // 获取规则树\r\n  async getRuleTree() {\r\n    let {\r\n      data: { status, data, message }\r\n    } = await this.$http.get(api.getRuleTree);\r\n    if (status) {\r\n      this.treeMessage.data = data;\r\n      if (this.autoFind && data.length) {\r\n        this.form = data[0];\r\n        this.autoFind = false;\r\n      }\r\n      if (this.form.id) {\r\n        this.$nextTick(() => {\r\n          (this.$refs.tree as any).setCurrentKey(this.form.id);\r\n        });\r\n      }\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n\r\n  // 添加\r\n  handleAddRule(parent: any) {\r\n    this.isEdit = true;\r\n    this.form = parent ? { parentId: parent.id, parentName: parent.codeName } : {};\r\n    this.$nextTick(() => {\r\n      (this.$refs.form as ElForm).clearValidate();\r\n    });\r\n    this.parentNode = parent;\r\n  }\r\n  handleSaveRule() {\r\n    (this.$refs.form as ElForm).validate(async flag => {\r\n      if (flag) {\r\n        let expressionResult = await (this.$refs.codeRule as any).getResult();\r\n        if (!expressionResult.ruleExpress) {\r\n          return this.$message.info(\"规则表达式不能为空\");\r\n        }\r\n        this.saveRule(expressionResult);\r\n      }\r\n    });\r\n  }\r\n  // 修改\r\n  handleEditRule(item: any) {\r\n    this.form = JSON.parse(JSON.stringify(item));\r\n    this.$nextTick(() => {\r\n      (this.$refs.form as ElForm).clearValidate();\r\n      (this.$refs.tree as any).setCurrentKey(this.form.id);\r\n    });\r\n    this.isEdit = true;\r\n  }\r\n  // 保存\r\n  async saveRule(expressionResult: any) {\r\n    this.loading = true;\r\n    try {\r\n      let {\r\n        data: { status, message }\r\n      } = await this.$http.post(this.form.id ? api.updateRuleTree : api.addRuleTree, {\r\n        id: this.form.id,\r\n        code: this.form.code,\r\n        codeName: this.form.codeName,\r\n        parentId: this.form.parentId,\r\n        remark: this.form.remark,\r\n        ...expressionResult\r\n      });\r\n      if (status) {\r\n        this.$message.success(\"保存成功\");\r\n        this.isEdit = false;\r\n        this.getRuleTree();\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n  // 删除\r\n  handleDeleteRule(item: any) {\r\n    this.$confirm(\"确认删除?\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\"\r\n    }).then(() => {\r\n      this.doDeleteRule(item.id);\r\n    });\r\n  }\r\n  async doDeleteRule(id: string) {\r\n    let {\r\n      data: { status, message }\r\n    } = await this.$http.get(api.deleteRuleTree + id);\r\n    if (status) {\r\n      this.$message.success(\"删除成功\");\r\n      this.autoFind = true;\r\n      this.getRuleTree();\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n  // 基础对象类型\r\n  async getBaseTypeList() {\r\n    let {\r\n      data: { status, data, message }\r\n    } = await this.$http.get(api.getBaseTypeList);\r\n    if (status) {\r\n      data.forEach((item: any) => {\r\n        item.disabled = true;\r\n      });\r\n      genCascader(data);\r\n      this.baseTypeOptions = data;\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRuleConfig.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRuleConfig.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeRuleConfig.vue?vue&type=template&id=09463e87&scoped=true&\"\nimport script from \"./CodeRuleConfig.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeRuleConfig.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeRuleConfig.vue?vue&type=style&index=0&id=09463e87&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09463e87\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.headerVisible && _vm.form.selectConditions.length)?_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"规则预览:\")]),_c('div',{staticClass:\"rule\"},[_vm._v(\"\\n      \"+_vm._s(_vm.preRuleExpress)+\"\\n    \")])]):_vm._e(),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.formRules,\"label-width\":\"0px\",\"size\":\"mini\"},nativeOn:{\"click\":function($event){return _vm.handleFocusRuleInput(_vm.cursorIndex)}}},[_c('div',{staticClass:\"condition-section\",class:{ focus: _vm.cursorIndex === null && _vm.keyboardFocus && !_vm.widgetFocus, disabled: _vm.disabled },on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }$event.stopPropagation();return _vm.handleFocusRuleInput(null)}}},[_vm._l((_vm.form.selectConditions),function(item,index){return [_c('div',{key:'a' + index,staticClass:\"cursor\",class:{ focus: _vm.cursorIndex === index && _vm.keyboardFocus && !_vm.widgetFocus },on:{\"click\":function($event){$event.stopPropagation();return _vm.handleFocusRuleInput(index)}}}),_c('div',{key:'b' + index},[(item.type === 'area')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('el-form-item',{attrs:{\"prop\":'selectConditions.' + index + '.value',\"rules\":{ required: true, message: ' ', trigger: ['blur', 'change'] }}},[_c('el-select',{staticStyle:{\"width\":\"256px\"},attrs:{\"multiple\":\"\",\"size\":\"mini\",\"disabled\":_vm.disabled},on:{\"visible-change\":function($event){return _vm.handleFocusRuleInput(_vm.cursorIndex)}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}},_vm._l((_vm.areaOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":index}},[_vm._v(_vm._s(item.label))])}),1)],1)],1):(item.type === 'baseData')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('div',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"父节点层级\")]),_c('el-select',{staticStyle:{\"width\":\"100px\",\"margin-left\":\"10px\"},attrs:{\"size\":\"mini\",\"disabled\":_vm.disabled},on:{\"visible-change\":function($event){return _vm.handleFocusRuleInput(_vm.cursorIndex)}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}},_vm._l((10),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":index,\"value\":index}})}),1),_c('div',{staticStyle:{\"margin-left\":\"20px\",\"font-size\":\"14px\"}},[_vm._v(\"最大长度\")]),_c('el-form-item',{attrs:{\"prop\":'selectConditions.' + index + '.maxlength',\"rules\":{ required: true, message: ' ', trigger: ['blur', 'change'] }}},[_c('el-input',{staticStyle:{\"width\":\"100px\",\"margin-left\":\"10px\"},attrs:{\"size\":\"mini\",\"maxlength\":2,\"disabled\":_vm.disabled},on:{\"focus\":_vm.handleFocusWidgetInput,\"blur\":_vm.handleBlurWidgetInput,\"input\":function ($event) { return _vm.handleInputMaxLength(item, $event); }},model:{value:(item.maxlength),callback:function ($$v) {_vm.$set(item, \"maxlength\", $$v)},expression:\"item.maxlength\"}})],1)],1):(item.type === 'concat')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"size\":\"mini\",\"disabled\":_vm.disabled},on:{\"visible-change\":function($event){return _vm.handleFocusRuleInput(_vm.cursorIndex)}},model:{value:(item.selectVal),callback:function ($$v) {_vm.$set(item, \"selectVal\", $$v)},expression:\"item.selectVal\"}},_vm._l((_vm.concatOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":index}})}),1)],1):(item.type === 'index')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"size\":\"mini\",\"disabled\":_vm.disabled},on:{\"visible-change\":function($event){return _vm.handleFocusRuleInput(_vm.cursorIndex)}},model:{value:(item.typeValue),callback:function ($$v) {_vm.$set(item, \"typeValue\", $$v)},expression:\"item.typeValue\"}},_vm._l((_vm.indexTypeOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":index}})}),1),_c('div',{staticStyle:{\"margin-left\":\"20px\",\"font-size\":\"14px\"}},[_vm._v(\"最大长度\")]),_c('el-form-item',{attrs:{\"prop\":'selectConditions.' + index + '.maxlength',\"rules\":{ required: true, message: ' ', trigger: ['blur', 'change'] }}},[_c('el-input',{staticStyle:{\"width\":\"100px\",\"margin-left\":\"10px\"},attrs:{\"size\":\"mini\",\"maxlength\":2,\"disabled\":_vm.disabled},on:{\"focus\":_vm.handleFocusWidgetInput,\"blur\":_vm.handleBlurWidgetInput,\"input\":function ($event) { return _vm.handleInputMaxLength(item, $event); }},model:{value:(item.maxlength),callback:function ($$v) {_vm.$set(item, \"maxlength\", $$v)},expression:\"item.maxlength\"}})],1)],1):(item.type === 'time')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('el-form-item',{attrs:{\"prop\":'selectConditions.' + index + '.value',\"rules\":{ required: true, message: ' ', trigger: ['blur', 'change'] }}},[_c('el-input',{staticStyle:{\"width\":\"130px\"},attrs:{\"size\":\"mini\",\"placeholder\":\"yMmDdHhSs.:-\",\"disabled\":_vm.disabled,\"maxlength\":30},on:{\"focus\":_vm.handleFocusWidgetInput,\"blur\":_vm.handleBlurWidgetInput,\"input\":function ($event) { return _vm.handleInputDateStr(item, $event); }},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})],1)],1):(item.type === 'fixedField')?_c('div',{staticClass:\"token\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label))]),_c('el-form-item',{attrs:{\"prop\":'selectConditions.' + index + '.value',\"rules\":{ required: true, message: ' ', trigger: ['blur', 'change'] }}},[_c('el-input',{staticStyle:{\"width\":\"150px\"},attrs:{\"size\":\"mini\",\"placeholder\":\"字母、数字、-、_、点\",\"disabled\":_vm.disabled,\"maxlength\":30},on:{\"focus\":_vm.handleFocusWidgetInput,\"blur\":_vm.handleBlurWidgetInput,\"input\":function ($event) { return _vm.handleInputFixed(item, $event); }},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})],1)],1):_vm._e()])]})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.keyboardFocus),expression:\"keyboardFocus\"}],staticClass:\"keyboard\"},_vm._l((_vm.keyboardList),function(item,index){return _c('el-button',{key:index,attrs:{\"size\":\"small\",\"disabled\":item.type === 'index' ? _vm.hasIndex : false},on:{\"click\":function($event){return _vm.handleSelectKey(item)}}},[_vm._v(_vm._s(item.label))])}),1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * @Author: liuyang\r\n * @Date: 2020-03-31 8:57\r\n */\r\n// 转数字\r\nexport function valToNum(val: string | number) {\r\n  val = String(val);\r\n  let [index, len, firstIsZero, firstIsMinus, hasPoint] = [0, val.length, false, false, false];\r\n  while (index < len) {\r\n    let currChar = val[index];\r\n    switch (index) {\r\n      case 0:\r\n        if (!/[\\d-]/.test(currChar)) {\r\n          // 第一位数字和-\r\n          return \"\";\r\n        }\r\n        if (currChar === \"0\") {\r\n          firstIsZero = true;\r\n        } else if (currChar === \"-\") {\r\n          firstIsMinus = true;\r\n        }\r\n        break;\r\n      case 1:\r\n        if (currChar === \".\") {\r\n          // 不允许 -.\r\n          if (firstIsMinus) {\r\n            return \"-\";\r\n          }\r\n          hasPoint = true;\r\n        } else if (firstIsZero && currChar !== \".\") {\r\n          // 只允许 0.\r\n          return \"0\";\r\n        } else if (!/[\\d]/.test(currChar)) {\r\n          return val.substr(0, index);\r\n        }\r\n        break;\r\n      default:\r\n        if (currChar === \".\") {\r\n          if (hasPoint) {\r\n            return val.substr(0, index); // 只有一个小数点\r\n          }\r\n          hasPoint = true;\r\n        } else if (!/\\d/.test(currChar)) {\r\n          return val.substr(0, index);\r\n        }\r\n    }\r\n    index++;\r\n  }\r\n  return val;\r\n}\r\n\r\n// 转正数\r\nexport function valToPositive(val: string | number) {\r\n  val = valToNum(val);\r\n  return val.charAt(0) === \"-\" ? val.substr(1) : val;\r\n}\r\n\r\n// 转负数\r\nexport function valToNegative(val: string | number) {\r\n  val = valToNum(val);\r\n  return val.charAt(0) !== \"-\" ? \"-\" : val;\r\n}\r\n\r\n// 转小数 默认四位小数 可指定精度 accuracy\r\nexport function valToDecimal(val: string | number, accuracy: number = 4) {\r\n  val = valToNum(val);\r\n  if (accuracy === 0 || accuracy === null) {\r\n    accuracy = -1;\r\n  } else if (accuracy < 0) {\r\n    return val;\r\n  }\r\n  let pointP = val.indexOf(\".\");\r\n  return pointP !== -1 ? val.substr(0, pointP + (accuracy + 1)) : val;\r\n}\r\n\r\n// 转整数\r\nexport function valToInt(val: string | number) {\r\n  return valToDecimal(val, 0);\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n * @Describe: Describe\r\n * @Author: liuyang\r\n * @Date: 2020-02-17 10:34\r\n */\r\nimport { Vue, Component, Prop, Watch } from \"vue-property-decorator\";\r\nimport { valToInt, valToPositive } from \"@/utils/inputFormat\";\r\nimport { ElForm } from \"element-ui/types/form\";\r\n\r\n@Component({})\r\nexport default class CodeRulesConfig extends Vue {\r\n  @Prop({ type: String })\r\n  expressionJson?: string;\r\n  @Prop({ type: Boolean, default: false })\r\n  disabled!: boolean;\r\n  @Prop({ type: Boolean, default: true })\r\n  headerVisible!: boolean;\r\n  // 自定义按键\r\n  keyboardFocus: boolean = false;\r\n  widgetFocus: boolean = false;\r\n  cursorIndex: number | null = null;\r\n  // 行政区域级别\r\n  areaOptions: any[] = [\r\n    { label: \"国家\", value: \"COUNTRY\" },\r\n    { label: \"省级\", value: \"PROVINCE\" },\r\n    { label: \"市级\", value: \"CITY\" },\r\n    { label: \"区县\", value: \"DISTRICT\" }\r\n    // { label: \"街道\", value: \"STREET\" },\r\n  ];\r\n  // 连接符\r\n  concatOptions: any[] = [\r\n    { label: \"短横线\", value: \"-\" },\r\n    { label: \"下划线\", value: \"_\" }\r\n    // { label: \"自定义\", value: \"custom\" }\r\n  ];\r\n  // 序号类型\r\n  indexTypeOptions: any[] = [\r\n    { label: \"数字\", value: \"NUM\" },\r\n    { label: \"大写字母\", value: \"UPPER_CASE\" },\r\n    { label: \"小写字母\", value: \"LOWER_CASE\" }\r\n  ];\r\n  keyboardList: any[] = [\r\n    { type: \"area\", label: \"行政区域\", value: [] },\r\n    { type: \"baseData\", label: \"基础数据类型\", value: 0, maxlength: 4 },\r\n    { type: \"concat\", label: \"连接符\", selectVal: 0, value: \"\" },\r\n    { type: \"index\", label: \"序号\", typeValue: 0, sortValue: 0, maxlength: 4 },\r\n    { type: \"time\", label: \"时间\", value: \"\" },\r\n    { type: \"fixedField\", label: \"固定字段\", selectVal: 0, value: \"\" }\r\n  ];\r\n  form: { selectConditions: any[] } = {\r\n    selectConditions: []\r\n  };\r\n  formRules: any = {};\r\n\r\n  // 输入限制\r\n  hasIndex: boolean = false;\r\n\r\n  // 预览表达式\r\n  get preRuleExpress() {\r\n    return this.form.selectConditions\r\n      .map(item => {\r\n        switch (item.type) {\r\n          case \"area\":\r\n            return `${item.label}(${item.value.map((d: any) => this.areaOptions[d].label).join(\"，\")})`;\r\n          case \"baseData\":\r\n            return `${item.label}(父节点层级${item.value}，最大长度${item.maxlength})`;\r\n          case \"concat\":\r\n            return this.concatOptions[item.selectVal].value;\r\n          case \"index\":\r\n            return `${item.label}(${this.indexTypeOptions[item.typeValue].label}，最大长度${item.maxlength})`;\r\n          case \"time\":\r\n          case \"fixedField\":\r\n            return `${item.label}(${item.value})`;\r\n        }\r\n      })\r\n      .join(\"\");\r\n  }\r\n\r\n  // 后端真实表达式\r\n  get ruleExpress() {\r\n    return this.form.selectConditions\r\n      .map(item => {\r\n        switch (item.type) {\r\n          case \"area\":\r\n            return `${item.label}(\"${item.value.map((d: any) => this.areaOptions[d].value).join(\",\")}\")`;\r\n          case \"baseData\":\r\n            return `${item.label}(${item.value},${item.maxlength})`;\r\n          case \"concat\":\r\n            return `连接符(\"${this.concatOptions[item.selectVal].value}\")`;\r\n          case \"index\":\r\n            return `${item.label}(\"${this.indexTypeOptions[item.typeValue].value}\",${item.maxlength})`;\r\n          case \"time\":\r\n          case \"fixedField\":\r\n            return `${item.label}(\"${item.value}\")`;\r\n        }\r\n      })\r\n      .join(\"+\");\r\n  }\r\n\r\n  @Watch(\"expressionJson\", { immediate: true })\r\n  handelExpressionJsonChange(expressionJson: string) {\r\n    if (expressionJson) {\r\n      this.form.selectConditions = JSON.parse(expressionJson);\r\n      this.hasIndex = this.form.selectConditions.some((d: any) => d.type === \"index\");\r\n    } else {\r\n      this.form.selectConditions = [];\r\n    }\r\n  }\r\n\r\n  created() {\r\n    document.addEventListener(\"click\", this.handleBlurRuleInput, true);\r\n    document.addEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  destroyed() {\r\n    document.removeEventListener(\"click\", this.handleBlurRuleInput);\r\n    document.removeEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  // 规则配置输入操作\r\n  handleFocusRuleInput(index: number | null) {\r\n    if (this.disabled) return;\r\n    this.keyboardFocus = true;\r\n    this.cursorIndex = index;\r\n  }\r\n  handleBlurRuleInput() {\r\n    this.keyboardFocus = false;\r\n  }\r\n  handleFocusWidgetInput() {\r\n    this.widgetFocus = true;\r\n  }\r\n  handleBlurWidgetInput() {\r\n    this.widgetFocus = false;\r\n  }\r\n\r\n  get reactKeydownEvent() {\r\n    return this.keyboardFocus && !this.widgetFocus;\r\n  }\r\n\r\n  handleKeydown(e: KeyboardEvent) {\r\n    if (!this.reactKeydownEvent) return;\r\n    switch (e.code.toLocaleLowerCase()) {\r\n      case \"backspace\":\r\n        this.handleDeleteToken();\r\n        break;\r\n      case \"arrowleft\":\r\n        this.handleMoveCursor(false);\r\n        break;\r\n      case \"arrowright\":\r\n        this.handleMoveCursor(true);\r\n        break;\r\n    }\r\n  }\r\n  handleSelectKey(item: any) {\r\n    let data = JSON.parse(JSON.stringify(item));\r\n    if (this.cursorIndex === null) {\r\n      this.form.selectConditions.push(data);\r\n    } else {\r\n      this.form.selectConditions.splice(this.cursorIndex, 0, data);\r\n      this.cursorIndex++;\r\n    }\r\n    switch (item.type) {\r\n      case \"index\":\r\n        this.hasIndex = true;\r\n        break;\r\n    }\r\n  }\r\n  // 删除一个表达式单元\r\n  handleDeleteToken() {\r\n    let item: any;\r\n    if (this.cursorIndex === null) {\r\n      item = this.form.selectConditions.pop();\r\n    } else if (this.cursorIndex > 0) {\r\n      item = this.form.selectConditions.splice(this.cursorIndex - 1, 1)[0];\r\n    }\r\n    switch (item.type) {\r\n      case \"index\":\r\n        this.hasIndex = false;\r\n        break;\r\n    }\r\n  }\r\n\r\n  // 光标移动\r\n  handleMoveCursor(arrow: boolean) {\r\n    if (arrow) {\r\n      if (this.cursorIndex !== null && this.cursorIndex < this.form.selectConditions.length - 1) {\r\n        this.cursorIndex++;\r\n      } else if (this.cursorIndex === this.form.selectConditions.length - 1) {\r\n        this.cursorIndex = null;\r\n      }\r\n    } else {\r\n      if (this.cursorIndex === null) {\r\n        this.cursorIndex = this.form.selectConditions.length - 1;\r\n      } else if (this.cursorIndex > 0) {\r\n        this.cursorIndex--;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 获取输入结果\r\n  getResult() {\r\n    return new Promise((resolve, reject) => {\r\n      (this.$refs.form as ElForm).validate(flag => {\r\n        if (flag) {\r\n          resolve({\r\n            preRuleExpress: this.preRuleExpress,\r\n            ruleExpress: this.ruleExpress,\r\n            preRuleExpressJson: JSON.stringify(this.form.selectConditions)\r\n          });\r\n        } else {\r\n          reject(\"表单校验失败\");\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // 输入校验\r\n  handleInputMaxLength(item: any, val: string) {\r\n    item.maxlength = valToPositive(valToInt(val));\r\n  }\r\n\r\n  // 日期格式化输入限制\r\n  handleInputDateStr(item: any, val: string) {\r\n    for (let i = 0; i < val.length; i++) {\r\n      if (!/[yMmDdHhSs.:-]/.test(val[i])) {\r\n        item.value = val.substr(0, i);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 固定字段格式化\r\n  handleInputFixed(item: any, val: string) {\r\n    for (let i = 0; i < val.length; i++) {\r\n      if (!/[a-zA-Z0-9._-]/.test(val[i])) {\r\n        item.value = val.substr(0, i);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRulesConfig.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeRulesConfig.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeRulesConfig.vue?vue&type=template&id=47bf3210&scoped=true&\"\nimport script from \"./CodeRulesConfig.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeRulesConfig.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeRulesConfig.vue?vue&type=style&index=0&id=47bf3210&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47bf3210\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * @Author: liuyang\r\n * @Date: 2020-02-17 9:42\r\n */\r\n\r\nconst api = {\r\n  getRuleTree: \"/admin/code/rule/listTree\",\r\n  addRuleTree: \"/admin/code/rule/add\",\r\n  updateRuleTree: \"/admin/code/rule/update\",\r\n  deleteRuleTree: \"/admin/code/rule/delete/\",\r\n  getOrgBindRuleList: \"/admin/code/rule/bind/listByOrg\",\r\n  getBaseTypeList: \"/admin/general/base/getObjectBaseTypeTree\",\r\n  bindRule: \"/admin/code/rule/bind/add\",\r\n  updateBindRule: \"/admin/code/rule/bind/update\",\r\n  unbindRule: \"/admin/code/rule/bind/delete/\",\r\n  getBindRuleDetail: \"/admin/code/rule/bind/detail/\",\r\n  getOrgTreeData: \"/admin/organization/orgTree\",\r\n  cloneRule: \"/admin/code/rule/bind/extends/\"\r\n};\r\n\r\nexport default api;\r\n"],"sourceRoot":""}